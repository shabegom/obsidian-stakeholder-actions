/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugin's github repository at
https://github.com/zsviczian/obsidian-stakeholder-actions
*/

'use strict';

var obsidian = require('obsidian');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const VIEW_TYPE_TODO = 'online.zsviczian.obsidian-stakeholder_action-plugin';

var TodoItemStatus;
(function (TodoItemStatus) {
    TodoItemStatus[TodoItemStatus["Todo"] = 0] = "Todo";
    TodoItemStatus[TodoItemStatus["Done"] = 1] = "Done";
})(TodoItemStatus || (TodoItemStatus = {}));
// eslint-disable-next-line @typescript-eslint/no-namespace
(function (TodoItemStatus) {
    function toggleStatus(status) {
        switch (status) {
            case TodoItemStatus.Todo:
                return TodoItemStatus.Done;
            case TodoItemStatus.Done:
                return TodoItemStatus.Todo;
        }
    }
    TodoItemStatus.toggleStatus = toggleStatus;
})(TodoItemStatus || (TodoItemStatus = {}));
class TodoItem {
    constructor(status, description, person, project, misc, isSomedayMaybeNote, isDiscussWithNote, isWaitingForNote, isPromisedToNote, sourceFilePath, startIndex, length, actionDate) {
        this.status = status;
        this.description = description;
        this.person = person;
        this.project = project;
        this.misc = misc;
        this.actionDate = actionDate;
        this.isSomedayMaybeNote = isSomedayMaybeNote;
        this.isDiscussWithNote = isDiscussWithNote;
        this.isWaitingForNote = isWaitingForNote;
        this.isPromisedToNote = isPromisedToNote;
        this.sourceFilePath = sourceFilePath;
        this.startIndex = startIndex;
        this.length = length;
    }
}

class TodoParser {
    constructor(props) {
        this.props = props;
    }
    parseTasks(filePath, fileContents) {
        return __awaiter(this, void 0, void 0, function* () {
            const pattern = /(-|\*) \[(\s|x)?\]\s(.*)/g;
            return [...fileContents.matchAll(pattern)].map(task => this.parseTask(filePath, task));
        });
    }
    parseTask(filePath, entry) {
        var _a;
        // debugger;
        const todoItemOffset = 2; // Strip off `-|* `
        const status = entry[2] === 'x' ? TodoItemStatus.Done : TodoItemStatus.Todo;
        const description = entry[3];
        const dateMatches = description.match(this.props.dateRegexp);
        let actionDate = undefined;
        if (dateMatches != null) {
            if (dateMatches.length == 4) {
                actionDate = new Date(parseInt(dateMatches[1]), parseInt(dateMatches[2]) - 1, parseInt(dateMatches[3]), 0, 0, 0, 0);
            }
            else if (dateMatches.length == 2) {
                actionDate = new Date(dateMatches[1]);
            }
        }
        const personMatches = description.match(this.props.personRegexp);
        const person = personMatches != null ? personMatches[1] : '';
        const projectMatches = description.match(this.props.projectRegexp);
        const project = projectMatches != null ? projectMatches[1] : '';
        const miscMatches = description.match(this.props.miscRegexp);
        const misc = miscMatches != null ? miscMatches.length == 2 ? miscMatches[1] : "" : "";
        return new TodoItem(status, description, person.toLowerCase(), project.toLowerCase(), misc.toLowerCase(), description.match(this.props.somedayMaybeRegexp) != null, description.match(this.props.discussWithRegexp) != null, description.match(this.props.waitingForRegexp) != null, description.match(this.props.promisedToRegexp) != null, filePath, ((_a = entry.index) !== null && _a !== void 0 ? _a : 0) + todoItemOffset, entry[0].length - todoItemOffset, actionDate);
    }
}

class TodoIndex {
    constructor(vault, listener, props) {
        this.props = props;
        this.vault = vault;
        this.todos = new Map();
        this.listeners = [listener];
    }
    reloadIndex(props) {
        return __awaiter(this, void 0, void 0, function* () {
            this.props = props;
            yield this.initialize();
        });
    }
    initialize() {
        return __awaiter(this, void 0, void 0, function* () {
            // TODO: persist index & last sync timestamp; only parse files that changed since then.
            const todoMap = new Map();
            let numberOfTodos = 0;
            const timeStart = new Date().getTime();
            const markdownFiles = this.vault.getMarkdownFiles();
            for (const file of markdownFiles) {
                const todos = yield this.parseTodosInFile(file);
                numberOfTodos += todos.length;
                if (todos.length > 0) {
                    todoMap.set(file.path, todos);
                }
            }
            const totalTimeMs = new Date().getTime() - timeStart;
            console.log(`[obsidian-stakeholder_action-plugin] Parsed ${numberOfTodos} TODOs from ${markdownFiles.length} markdown files in (${totalTimeMs / 1000.0}s)`);
            this.todos = todoMap;
            this.registerEventHandlers();
            this.invokeListeners();
        });
    }
    setStatus(todo, newStatus) {
        const file = this.vault.getAbstractFileByPath(todo.sourceFilePath);
        const fileContents = this.vault.read(file);
        fileContents.then((c) => {
            const newTodo = `[${newStatus === TodoItemStatus.Done ? 'x' : ' '}] ${todo.description}`;
            const newContents = c.substring(0, todo.startIndex) +
                newTodo +
                c.substring(todo.startIndex + todo.length);
            this.vault.modify(file, newContents);
        });
    }
    indexAbstractFile(file) {
        if (!(file instanceof obsidian.TFile)) {
            return;
        }
        this.indexFile(file);
    }
    indexFile(file) {
        this.parseTodosInFile(file).then(todos => {
            this.todos.set(file.path, todos);
            this.invokeListeners();
        });
    }
    clearIndex(path, silent = false) {
        this.todos.delete(path);
        if (!silent) {
            this.invokeListeners();
        }
    }
    setProps(setter) {
        this.props = setter(this.props);
        //do I need to do anything else??
    }
    parseTodosInFile(file) {
        return __awaiter(this, void 0, void 0, function* () {
            // TODO: Does it make sense to index completed TODOs at all?
            const todoParser = new TodoParser(this.props);
            const fileContents = yield this.vault.cachedRead(file);
            return todoParser
                .parseTasks(file.path, fileContents)
                .then(todos => todos.filter(todo => todo.status === TodoItemStatus.Todo));
        });
    }
    registerEventHandlers() {
        this.vault.on('create', (file) => {
            this.indexAbstractFile(file);
        });
        this.vault.on('modify', (file) => {
            this.indexAbstractFile(file);
        });
        this.vault.on('delete', (file) => {
            this.clearIndex(file.path);
        });
        // We could simply change the references to the old path, but parsing again does the trick as well
        this.vault.on('rename', (file, oldPath) => {
            this.clearIndex(oldPath);
            this.indexAbstractFile(file);
        });
    }
    invokeListeners() {
        const todos = [].concat(...Array.from(this.todos.values()));
        this.listeners.forEach(listener => listener(todos));
    }
}

const DEFAULT_SETTINGS = {
    personRegexpString: '\\[{2}People\\/(.*?)\\]{2}',
    projectRegexpString: '\\[{2}Projects\\/(.*?)\\]{2}',
    dateRegexpString: '#(\\d{4})\\/(\\d{2})\\/(\\d{2})',
    discussWithRegexpString: '#(discussWith)',
    waitingForRegexpString: '#(waitingFor)',
    promisedToRegexpString: '#(promisedTo)',
    somedayMaybeRegexpString: '#(someday)',
};
class ActionTrackerSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        const { containerEl } = this;
        this.containerEl.empty();
        this.containerEl.createEl('h2', {
            text: 'Settings for the stakeholder action tracker plugin',
        });
        new obsidian.Setting(containerEl)
            .setName('Person regexp pattern')
            .setDesc('This is the regular expression to identify the action party in the action. Used for filtering todos by person.')
            .addText(text => text
            .setPlaceholder('\\[{2}People\\/(.*?)\\]{2}')
            .setValue(this.plugin.settings.personRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.personRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Project regexp pattern')
            .setDesc('This is the regular expression to identify the project in the action. Used for filtering todos by project name.')
            .addText(text => text
            .setPlaceholder('\\[{2}Projects\\/(.*?)\\]{2}')
            .setValue(this.plugin.settings.projectRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.projectRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Date regexp pattern')
            .setDesc('This is the regular expression to get the date for an action. The RegExp needs to capture 3 values. The first one should be the year (yyyy), the sceond the month (mm), the third the day (dd).')
            .addText(text => text
            .setPlaceholder('#(\\d{4})\\/(\\d{2})\\/(\\d{2})')
            .setValue(this.plugin.settings.dateRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.dateRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Discuss With regexp pattern')
            .setDesc('This is the regexp pattern you use to mark topics you want to discuss with someone. "Discuss with", "Promised to", and "Waiting for" actions show up under the Stakeholder Actions tab.')
            .addText(text => text
            .setPlaceholder('#(discussWith)')
            .setValue(this.plugin.settings.discussWithRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.discussWithRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Waiting For regexp pattern')
            .setDesc('This is the regexp pattern you use to mark topics someone has promised to deliver to me. "Discuss with", "Promised to", and "Waiting for" actions show up under the Stakeholder Actions tab.')
            .addText(text => text
            .setPlaceholder('#(waitingFor)')
            .setValue(this.plugin.settings.waitingForRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.waitingForRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Promised To regexp pattern')
            .setDesc('This is the regexp pattern you use to mark topics someone has promised to deliver to me. "Discuss with", "Promised to", and "Waiting for" actions show up under the Stakeholder Actions tab.')
            .addText(text => text
            .setPlaceholder('#(promisedTo)')
            .setValue(this.plugin.settings.promisedToRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.promisedToRegexpString = value;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Someday Maybe regexp pattern')
            .setDesc('This is the regexp pattern you use to mark actions deliberately without a deadline - i.e. bucket list. Actions without a valid tag and without a deadline will show up in the Inbox.')
            .addText(text => text
            .setPlaceholder('#(someday)')
            .setValue(this.plugin.settings.somedayMaybeRegexpString)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.somedayMaybeRegexpString = value;
            yield this.plugin.saveSettings();
        })));
    }
}

var Icon;
(function (Icon) {
    Icon[Icon["Inbox"] = 0] = "Inbox";
    Icon[Icon["Reveal"] = 1] = "Reveal";
    Icon[Icon["Scheduled"] = 2] = "Scheduled";
    Icon[Icon["Someday"] = 3] = "Someday";
    Icon[Icon["Today"] = 4] = "Today";
    Icon[Icon["Stakeholder"] = 5] = "Stakeholder";
    Icon[Icon["Aging"] = 6] = "Aging";
    Icon[Icon["Sort"] = 7] = "Sort";
})(Icon || (Icon = {}));
const RenderIcon = (icon, title = '', description = '') => {
    const svg = svgForIcon(icon)(title, description);
    return parser.parseFromString(svg, 'text/xml').documentElement;
};
const parser = new DOMParser();
const svgForIcon = (icon) => {
    switch (icon) {
        case Icon.Inbox:
            return inboxIcon;
        case Icon.Reveal:
            return revealIcon;
        case Icon.Scheduled:
            return scheduledIcon;
        case Icon.Someday:
            return somedayIcon;
        case Icon.Today:
            return todayIcon;
        case Icon.Stakeholder:
            return stakeholderIcon;
        case Icon.Aging:
            return agingIcon;
        case Icon.Sort:
            return sortIcon;
    }
};
const inboxIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <path d="M0 0h24v24H0V0z" fill="none"/>
  <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5v-3h3.56c.69 1.19 1.97 2 3.45 2s2.75-.81 3.45-2H19v3zm0-5h-4.99c0 1.1-.9 2-2 2s-2-.9-2-2H5V5h14v9z"/>
</svg>
`;
const revealIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" role="img" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <rect fill="none" height="24" width="24"/><path d="M9,5v2h6.59L4,18.59L5.41,20L17,8.41V15h2V5H9z"/>
</svg>
`;
const scheduledIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <path d="M0 0h24v24H0V0z" fill="none"/>
  <path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V10h16v11zm0-13H4V5h16v3z"/>
</svg>
`;
const somedayIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <g><rect fill="none" height="24" width="24"/></g>
  <g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"/><rect height="2" width="6" x="9" y="12"/></g></g>
</svg>
`;
const todayIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <path d="M0 0h24v24H0V0z" fill="none"/>
  <path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/>
</svg>
`;
const stakeholderIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 16 24" width="16" height="24" viewBox="0 0 16 24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <path d="M0 0h24v16H0V0z" fill="none"/>
  <path  d="M 12.041617 0.379395 C 14.783072 -0.385254 17.844596 0.648438 20.335563 2.021973 C 22.826529 3.395508 25.707145 5.746094 26.973502 8.606445 C 28.23986 11.480957 28.921744 16.182129 27.933707 19.226562 C 26.94567 22.270996 23.744986 25.471191 21.059195 26.901367 C 18.359488 28.345703 14.68566 28.628906 11.777213 27.864258 C 8.868766 27.099609 5.584586 24.635742 3.566764 22.299316 C 1.562858 19.962891 -0.246224 16.960938 -0.301889 13.874023 C -0.357553 10.787109 0.811393 6.128418 3.204947 3.806152 C 5.598502 1.483887 11.888541 0.379395 14.087272 -0.0737305 C 16.299918 -0.526855 16.480826 0.761719 16.439078 1.059082 M 18.902213 -0.201172 C 21.629752 0.308594 25.484488 3.62207 26.94567 6.397461 C 28.420768 9.172852 28.532096 13.52002 27.697135 16.422852 C 26.87609 19.325684 24.245963 22.101074 21.963736 23.814453 C 19.68151 25.513672 17.134879 26.349121 14.031608 26.660645 C 10.942252 26.958008 5.821158 27.524414 3.385856 25.655273 C 0.950553 23.800293 -0.580209 18.476074 -0.594125 15.488281 C -0.608041 12.500488 1.72985 10.022461 3.30236 7.728516 C 4.874869 5.43457 6.113395 2.970703 8.840934 1.724609 C 11.568473 0.478516 18.053336 0.237793 19.639762 0.237793 C 21.226188 0.223633 18.526481 1.512207 18.38732 1.696289 " transform="matrix(0.280702,0,0,0.275862,3.237084,2.758621)"/>
  <path  d="M -0.260884 -17.497731 C -0.664449 -21.207692 -3.405904 -34.730641 -2.779683 -39.941578 C -2.153463 -45.152516 0.114848 -46.894215 3.482524 -48.749196 C 6.8502 -50.590016 13.098491 -51.467946 17.440287 -51.028981 C 21.782084 -50.590016 27.042338 -51.694508 29.519389 -46.129567 C 31.99644 -40.564625 37.242778 -22.595387 32.27476 -17.639332 C 27.320659 -12.683278 5.124614 -16.50652 -0.246968 -16.393238 M -1.513326 -18.729664 C -1.555074 -22.708668 -1.193257 -36.727223 -0.469625 -41.499196 C 0.254008 -46.257008 -0.107808 -45.888844 2.814555 -47.290699 C 5.736918 -48.692555 12.305278 -50.09441 17.092387 -49.938649 C 21.86558 -49.768727 29.268901 -51.538746 31.523295 -46.313649 C 33.77769 -41.088551 35.753764 -23.430836 30.590922 -18.602223 C 25.441996 -13.77361 5.820414 -17.582692 0.601909 -17.356129 " transform="matrix(0.280702,0,0,0.275862,3.612293,25.350398)"/>
</svg>
`;
const agingIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24" aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <g id="surface1">
  <path style="fill-rule:evenodd;fill-opacity:1;stroke-width:16;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:4;" d="M 254.333333 461.166667 C 125 283.833333 172.833333 22.333333 518.5 18.333333 C 864.666667 17.666667 924.666667 295.833333 792.833333 449.666667 C 801.333333 531.5 801.5 600.333333 738.5 618.333333 C 712.833333 726.333333 722.5 794.5 707.166667 829.666667 C 635.333333 956.666667 410.833333 962.5 340 831.166667 C 323.666667 790 337.5 722.5 305.666667 612.166667 C 261.833333 595.166667 248.833333 542.666667 254.333333 461.166667 Z M 254.333333 238.333333 C 236.666667 279 245.166667 305 261.666667 348.5 C 272 375.333333 259.5 429.166667 254.333333 461.166667 M 797.166667 238.333333 C 809.5 264 807.166667 289.833333 790.166667 342.333333 C 778.5 372.833333 790.166667 419.166667 792.833333 449.666667 M 394.5 693.833333 C 384 658.666667 342 623.5 305.666667 612.166667 M 655.333333 692 C 672 650 694.5 620 738.5 618.333333 " transform="matrix(0.0234375,0,0,0.0234375,0,0)"/>
  <path style="fill:none;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:4;" d="M 340 626 C 361 674 372.333333 725.833333 380 779 C 428.166667 840 594.166667 858 665 776 C 669.833333 725.166667 687.666667 675.666667 704 626 L 655.333333 692 C 649.666667 733.166667 402 730.5 394.5 693.833333 Z M 403.5 798 L 403.5 706 M 432 815 L 433 714 M 462.5 822 L 463 719 M 492.5 827.5 C 492.5 825.5 493 721.5 493 721.5 M 523.5 831 L 523 722.5 M 554.5 827 L 554 722 M 583 822.5 L 582 719 M 615.5 810.5 L 614 715 M 644 794 L 643 705.5 M 642 750.5 C 560.5 786 487.833333 788.5 404 750.5 " transform="matrix(0.0234375,0,0,0.0234375,0,0)"/>
  <path style=" stroke:none;fill-rule:evenodd;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 7.25 9.789062 C 7.113281 10.28125 7.207031 10.910156 7.382812 11.460938 C 7.605469 12.152344 8.105469 12.566406 8.953125 12.632812 C 9.929688 12.65625 10.554688 12.089844 10.96875 11.179688 C 11.082031 10.90625 11.15625 10.445312 11.039062 9.9375 C 10.96875 9.679688 10.644531 9.296875 10.328125 9.101562 C 9.753906 8.753906 7.472656 8.949219 7.25 9.789062 Z M 17.339844 9.726562 C 17.472656 10.21875 17.378906 10.847656 17.203125 11.398438 C 16.984375 12.089844 16.480469 12.503906 15.632812 12.570312 C 14.65625 12.59375 14.035156 12.027344 13.617188 11.117188 C 13.503906 10.84375 13.429688 10.382812 13.546875 9.875 C 13.617188 9.617188 13.941406 9.234375 14.257812 9.035156 C 14.835938 8.691406 17.113281 8.886719 17.339844 9.726562 Z M 12.035156 12 L 12.035156 14.765625 C 11.625 15.386719 11.484375 15.433594 11.25 15.421875 C 10.941406 15.421875 10.734375 14.964844 10.792969 14.4375 C 10.945312 12.769531 11.449219 12.425781 12.035156 12 Z M 12.453125 12.011719 L 12.453125 14.777344 C 12.863281 15.398438 13.003906 15.445312 13.238281 15.433594 C 13.542969 15.433594 13.75 14.976562 13.695312 14.449219 C 13.542969 12.78125 13.039062 12.4375 12.453125 12.011719 Z M 12.453125 12.011719 "/>
  </g>
</svg>
`;
const sortIcon = (title, description) => `
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="24" viewBox="0 0 20 24"> aria-label="${title + description}">
  <title>${title}</title>
  <description>${description}</description>
  <path style="stroke-width:4;" d="M 0 0 C 0 13.339844 0 66.660156 0 80 M 0 0 C 0 13.339844 0 66.660156 0 80 " transform="matrix(0.2,0,0,0.2,2,6)"/>
  <path style="stroke-width:4;" d="M -10.253906 51.816406 C -7.34375 59.804688 -4.433594 67.792969 0 80 M -10.253906 51.816406 C -7.65625 58.984375 -5.039062 66.171875 0 80 " transform="matrix(0.2,0,0,0.2,2,6)"/>
  <path style="stroke-width:4;" d="M 10.253906 51.816406 C 7.34375 59.804688 4.433594 67.792969 0 80 M 10.253906 51.816406 C 7.65625 58.984375 5.039062 66.171875 0 80 " transform="matrix(0.2,0,0,0.2,2,6)"/>
  <path style="stroke-width:4;" d="M 0 0 C 0 -13.339844 0 -66.660156 0 -80 M 0 0 C 0 -13.339844 0 -66.660156 0 -80 " transform="matrix(0.2,0,0,0.2,18,18)"/>
  <path style="stroke-width:4;" d="M 10.253906 -51.816406 C 6.992188 -60.78125 3.730469 -69.746094 0 -80 M 10.253906 -51.816406 C 7.109375 -60.488281 3.945312 -69.179688 0 -80 " transform="matrix(0.2,0,0,0.2,18,18)"/>
  <path style="stroke-width:4;" d="M -10.253906 -51.816406 C -6.992188 -60.78125 -3.730469 -69.746094 0 -80 M -10.253906 -51.816406 C -7.109375 -60.488281 -3.945312 -69.179688 0 -80 " transform="matrix(0.2,0,0,0.2,18,18)"/>
  <path style="stroke-width:4;" d="M 0 0 C 6.660156 0 33.339844 0 40 0 M 0 0 C 6.660156 0 33.339844 0 40 0 " transform="matrix(0.2,0,0,0.2,6,6)"/>
  <path style="stroke-width:4;" d="M 0 0 C 6.660156 0 33.339844 0 40 0 M 0 0 C 6.660156 0 33.339844 0 40 0 " transform="matrix(0.2,0,0,0.2,6,10)"/>
  <path style="stroke-width:4;" d="M 0 0 C 6.660156 0 33.339844 0 40 0 M 0 0 C 6.660156 0 33.339844 0 40 0 " transform="matrix(0.2,0,0,0.2,6,14)"/>
</svg>
`;

var TodoItemViewPane;
(function (TodoItemViewPane) {
    TodoItemViewPane[TodoItemViewPane["Aging"] = 0] = "Aging";
    TodoItemViewPane[TodoItemViewPane["Today"] = 1] = "Today";
    TodoItemViewPane[TodoItemViewPane["Scheduled"] = 2] = "Scheduled";
    TodoItemViewPane[TodoItemViewPane["Inbox"] = 3] = "Inbox";
    TodoItemViewPane[TodoItemViewPane["Someday"] = 4] = "Someday";
    TodoItemViewPane[TodoItemViewPane["Stakeholder"] = 5] = "Stakeholder";
})(TodoItemViewPane || (TodoItemViewPane = {}));
var TodoSortStates;
(function (TodoSortStates) {
    TodoSortStates[TodoSortStates["None"] = 0] = "None";
    TodoSortStates[TodoSortStates["DateAsc"] = 1] = "DateAsc";
    TodoSortStates[TodoSortStates["DateDesc"] = 2] = "DateDesc";
    TodoSortStates[TodoSortStates["StakeholderAsc"] = 3] = "StakeholderAsc";
    TodoSortStates[TodoSortStates["StakeholderDesc"] = 4] = "StakeholderDesc";
    TodoSortStates[TodoSortStates["ProjectAsc"] = 5] = "ProjectAsc";
    TodoSortStates[TodoSortStates["ProjectDesc"] = 6] = "ProjectDesc";
    TodoSortStates[TodoSortStates["MiscAsc"] = 7] = "MiscAsc";
    TodoSortStates[TodoSortStates["MiscDesc"] = 8] = "MiscDesc";
    TodoSortStates[TodoSortStates["FullTextAsc"] = 9] = "FullTextAsc";
    TodoSortStates[TodoSortStates["FullTextDesc"] = 10] = "FullTextDesc";
})(TodoSortStates || (TodoSortStates = {}));
class TodoItemView extends obsidian.ItemView {
    constructor(leaf, props) {
        //debugger;
        super(leaf);
        this.props = props;
        this.state = {
            activePane: TodoItemViewPane.Today,
        };
        this.sortState = {
            state: TodoSortStates.None,
        };
        this.sortStateCount = Object.values(TodoSortStates).length / 2;
        this.filter = '';
    }
    getViewType() {
        return VIEW_TYPE_TODO;
    }
    getDisplayText() {
        return 'Todo';
    }
    getIcon() {
        return 'checkmark';
    }
    onClose() {
        return Promise.resolve();
    }
    setDisplayProps(props) {
        this.props.isInboxVisible = props.isInboxVisible;
        this.props.isAgingVisible = props.isAgingVisible;
        this.props.isTodayVisible = props.isTodayVisible;
        this.props.isScheduledVisible = props.isScheduledVisible;
        this.props.isStakeholderVisible = props.isStakeholderVisible;
        this.props.isSomedayVisible = props.isSomedayVisible;
        this.props.inboxTooltip = props.inboxTooltip;
        this.props.agingTooltip = props.agingTooltip;
        this.props.todayTooltip = props.todayTooltip;
        this.props.scheduledTooltip = props.scheduledTooltip;
        this.props.stakeholderTooltip = props.stakeholderTooltip;
        this.props.somedayTooltip = props.somedayTooltip;
        this.render();
    }
    setProps(setter) {
        this.props = setter(this.props);
        this.render();
    }
    setViewState(newState) {
        this.state = newState;
        if (newState.activePane == TodoItemViewPane.Aging || newState.activePane == TodoItemViewPane.Scheduled || newState.activePane == TodoItemViewPane.Today)
            this.sortState = { state: TodoSortStates.DateAsc };
        else if (newState.activePane == TodoItemViewPane.Stakeholder)
            this.sortState = { state: TodoSortStates.StakeholderAsc };
        else
            this.sortState = { state: TodoSortStates.FullTextAsc };
        this.render();
    }
    setSortState(newState) {
        this.sortState = newState;
        this.render();
    }
    setFilter(filter) {
        this.filter = filter;
        this.filterRegexp = new RegExp(filter, 'i');
        this.renderViewItemsOnly();
    }
    renderViewItemsOnly() {
        const container = this.containerEl.children[1].children[0];
        container.children[2].remove();
        container.createDiv('todo-item-view-items', (el) => {
            this.renderItems(el);
        });
    }
    render() {
        const container = this.containerEl.children[1];
        container.empty();
        container.createDiv('todo-item-view-container', (el) => {
            el.createDiv('todo-item-view-search', (el) => {
                this.renderSearch(el);
            });
            el.createDiv('todo-item-view-toolbar', (el) => {
                this.renderToolBar(el);
            });
            el.createDiv('todo-item-view-items', (el) => {
                this.renderItems(el);
            });
        });
    }
    renderSearch(container) {
        const activeClass = () => {
            if (this.sortState.state == TodoSortStates.None)
                return ' none';
            else
                return ' active';
        };
        const sortLabel = (sortState) => {
            switch (sortState) {
                case TodoSortStates.None:
                    return 'Sort by: none';
                case TodoSortStates.DateDesc:
                    return 'Sort by: Action Date Descending';
                case TodoSortStates.DateAsc:
                    return 'Sort by: Action Date Ascending';
                case TodoSortStates.StakeholderDesc:
                    return 'Sort by: Person Descending';
                case TodoSortStates.StakeholderAsc:
                    return 'Sort by: Person Ascending';
                case TodoSortStates.ProjectDesc:
                    return 'Sort by: Project Descending';
                case TodoSortStates.ProjectAsc:
                    return 'Sort by: Project Ascending';
                case TodoSortStates.MiscDesc:
                    return 'Sort by: Misc-snippet Descending';
                case TodoSortStates.MiscAsc:
                    return 'Sort by: Misc-snippet Ascending';
                case TodoSortStates.FullTextDesc:
                    return 'Sort by: Full Text Descending';
                case TodoSortStates.FullTextAsc:
                    return 'Sort by: Full Text Ascending';
            }
        };
        container.createEl('input', { value: this.filter }, (el) => {
            el.addClass('todo-filter-input');
            el.setAttribute('placeholder', 'proj/person RexExp filter, case insensitive');
            el.onkeyup = (e) => {
                this.setFilter(e.target.value);
            };
        });
        container.createDiv(`todo-item-view-sort${activeClass()}`, (el) => {
            el.appendChild(RenderIcon(Icon.Sort, sortLabel(this.sortState.state)));
            el.onClickEvent((e) => {
                const nextSortState = (this.sortState.state + 1) % this.sortStateCount;
                this.setSortState({ state: nextSortState });
                //(<HTMLElement>e.target).setAttribute('aria-label',sortLabel(nextSortState));
            });
        });
    }
    renderToolBar(container) {
        const activeClass = (pane) => {
            return pane === this.state.activePane ? ' active' : '';
        };
        const setActivePane = (pane) => {
            const newState = Object.assign(Object.assign({}, this.state), { activePane: pane });
            this.setViewState(newState);
        };
        if (this.props.isInboxVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Inbox)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Inbox, this.props.inboxTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Inbox));
            });
        if (this.props.isAgingVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Aging)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Aging, this.props.agingTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Aging));
            });
        if (this.props.isTodayVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Today)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Today, this.props.todayTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Today));
            });
        if (this.props.isScheduledVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Scheduled)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Scheduled, this.props.scheduledTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Scheduled));
            });
        if (this.props.isStakeholderVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Stakeholder)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Stakeholder, this.props.stakeholderTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Stakeholder));
            });
        if (this.props.isSomedayVisible)
            container.createDiv(`todo-item-view-toolbar-item${activeClass(TodoItemViewPane.Someday)}`, (el) => {
                el.appendChild(RenderIcon(Icon.Someday, this.props.somedayTooltip));
                el.onClickEvent(() => setActivePane(TodoItemViewPane.Someday));
            });
    }
    renderItems(container) {
        const sortView = (a, b) => {
            return this.sortView(a, b);
        };
        const todosToRender = this.props.todos
            .filter(this.filterForState, this);
        const sortedTodos = todosToRender.sort(sortView);
        sortedTodos
            .forEach((todo, index) => {
            if (index > 0) {
                if ((todo.isWaitingForNote && todosToRender[index - 1].isDiscussWithNote) ||
                    (todo.isPromisedToNote &&
                        (todosToRender[index - 1].isWaitingForNote || todosToRender[index - 1].isDiscussWithNote)) ||
                    (!todo.isPromisedToNote && !todo.isWaitingForNote && !todo.isDiscussWithNote &&
                        (todosToRender[index - 1].isWaitingForNote || todosToRender[index - 1].isDiscussWithNote || todosToRender[index - 1].isPromisedToNote))) {
                    container.createEl('hr', {}, (el) => {
                        el.addClass('todo-item-view-divider');
                    });
                }
            }
            container.createDiv('todo-item-view-item', (el) => {
                el.createDiv('todo-item-view-item-checkbox', (el) => {
                    el.createEl('input', { type: 'checkbox' }, (el) => {
                        el.checked = todo.status === TodoItemStatus.Done;
                        el.onClickEvent(() => {
                            this.toggleTodo(todo);
                        });
                    });
                });
                el.createDiv('todo-item-view-item-description', (el) => {
                    obsidian.MarkdownRenderer.renderMarkdown(todo.description, el, todo.sourceFilePath, this);
                });
                el.createDiv('todo-item-view-item-link', (el) => {
                    el.appendChild(RenderIcon(Icon.Reveal, 'Open file'));
                    el.onClickEvent(() => {
                        this.openFile(todo);
                    });
                });
            });
        });
    }
    sortView(a, b) {
        let sortResult = 0;
        switch (this.sortState.state) {
            case TodoSortStates.None:
                sortResult = 0;
                break;
            case TodoSortStates.DateAsc:
                sortResult = a.actionDate < b.actionDate ? -1 : a.actionDate > b.actionDate ? 1 : 0;
                break;
            case TodoSortStates.DateDesc:
                sortResult = a.actionDate > b.actionDate ? -1 : a.actionDate < b.actionDate ? 1 : 0;
                break;
            case TodoSortStates.StakeholderAsc:
                sortResult = a.person < b.person ? -1 : a.person > b.person ? 1 : 0;
                break;
            case TodoSortStates.StakeholderDesc:
                sortResult = a.person > b.person ? -1 : a.person < b.person ? 1 : 0;
                break;
            case TodoSortStates.ProjectAsc:
                sortResult = a.project < b.project ? -1 : a.project > b.project ? 1 : 0;
                break;
            case TodoSortStates.ProjectDesc:
                sortResult = a.project > b.project ? -1 : a.project < b.project ? 1 : 0;
                break;
            case TodoSortStates.MiscAsc:
                sortResult = a.misc < b.misc ? -1 : a.misc > b.misc ? 1 : 0;
                break;
            case TodoSortStates.MiscDesc:
                sortResult = a.misc > b.misc ? -1 : a.misc < b.misc ? 1 : 0;
                break;
            case TodoSortStates.FullTextAsc:
                sortResult = a.description.toLowerCase() < b.description.toLowerCase() ? -1 : a.description.toLowerCase() > b.description.toLowerCase() ? 1 : 0;
                break;
            case TodoSortStates.FullTextDesc:
                sortResult = a.description.toLowerCase() > b.description.toLowerCase() ? -1 : a.description.toLowerCase() < b.description.toLowerCase() ? 1 : 0;
                break;
        }
        if (this.state.activePane == TodoItemViewPane.Stakeholder) {
            if (a.isDiscussWithNote && !b.isDiscussWithNote) {
                return -1;
            }
            if (a.isWaitingForNote && !b.isDiscussWithNote && !b.isWaitingForNote) {
                return -1;
            }
            if (a.isPromisedToNote && !b.isDiscussWithNote && !b.isWaitingForNote) {
                return -1;
            }
            if (b.isDiscussWithNote && !a.isDiscussWithNote) {
                return 1;
            }
            if (b.isWaitingForNote && !a.isDiscussWithNote && !a.isWaitingForNote) {
                return 1;
            }
            if (b.isPromisedToNote && !a.isDiscussWithNote && !a.isWaitingForNote) {
                return 1;
            }
            return sortResult;
        }
        return sortResult;
    }
    filterForState(value, _index, _array) {
        const isPersonMatch = value.person.match(this.filterRegexp) != null;
        const isProjectMatch = value.project.match(this.filterRegexp) != null;
        const isMiscMatch = value.misc.match(this.filterRegexp) != null;
        const isFilterSet = this.filter != "";
        const hasPersonOrProject = value.person != '' || value.project != '';
        const isPeopleActionNote = value.isDiscussWithNote || value.isWaitingForNote || value.isPromisedToNote;
        if (!isFilterSet || isPersonMatch || isProjectMatch || isMiscMatch) {
            const isToday = (date) => {
                let today = new Date();
                return (date.getDate() == today.getDate() &&
                    date.getMonth() == today.getMonth() &&
                    date.getFullYear() == today.getFullYear());
            };
            const isBeforeToday = (date) => {
                let today = (new Date());
                today.setHours(0, 0, 0, 0);
                return date < today;
            };
            const isAgingNote = value.actionDate && isBeforeToday(value.actionDate);
            const isTodayNote = value.actionDate && isToday(value.actionDate);
            const isScheduledNote = !value.isSomedayMaybeNote && value.actionDate && !isTodayNote && !isAgingNote;
            switch (this.state.activePane) {
                case TodoItemViewPane.Inbox:
                    return !value.isSomedayMaybeNote && !isTodayNote && !isScheduledNote && !isAgingNote && !(isPeopleActionNote && hasPersonOrProject);
                case TodoItemViewPane.Scheduled:
                    return isScheduledNote;
                case TodoItemViewPane.Someday:
                    return value.isSomedayMaybeNote;
                case TodoItemViewPane.Today:
                    return isTodayNote;
                case TodoItemViewPane.Aging:
                    return isAgingNote;
                case TodoItemViewPane.Stakeholder:
                    return hasPersonOrProject && isPeopleActionNote;
            }
        }
        else
            return false;
    }
    toggleTodo(todo) {
        this.props.toggleTodo(todo, TodoItemStatus.toggleStatus(todo.status));
    }
    openFile(todo) {
        this.props.openFile(todo.sourceFilePath);
    }
}

class ActionTrackerPlugin extends obsidian.Plugin {
    constructor(app, manifest) {
        super(app, manifest);
    }
    getTodoItemIndexProps() {
        return {
            personRegexp: new RegExp(this.getSettingValue('personRegexpString')),
            projectRegexp: new RegExp(this.getSettingValue('projectRegexpString')),
            dateRegexp: new RegExp(this.getSettingValue('dateRegexpString')),
            discussWithRegexp: new RegExp(this.getSettingValue('discussWithRegexpString')),
            waitingForRegexp: new RegExp(this.getSettingValue('waitingForRegexpString')),
            promisedToRegexp: new RegExp(this.getSettingValue('promisedToRegexpString')),
            somedayMaybeRegexp: new RegExp(this.getSettingValue('somedayMaybeRegexpString')),
        };
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('loading plugin');
            yield this.loadSettings();
            this.todoIndex = new TodoIndex(this.app.vault, this.tick.bind(this), this.getTodoItemIndexProps());
            this.registerView(VIEW_TYPE_TODO, (leaf) => {
                const todos = [];
                const props = {
                    todos: todos,
                    openFile: (filePath) => {
                        const file = this.app.vault.getAbstractFileByPath(filePath);
                        this.app.workspace.splitActiveLeaf().openFile(file);
                    },
                    toggleTodo: (todo, newStatus) => {
                        this.todoIndex.setStatus(todo, newStatus);
                    },
                };
                this.view = new TodoItemView(leaf, props);
                return this.view;
            });
            this.addSettingTab(new ActionTrackerSettingTab(this.app, this));
            if (this.app.workspace.layoutReady) {
                this.initLeaf();
                yield this.prepareIndex();
            }
            else {
                this.registerEvent(this.app.workspace.on('layout-ready', this.initLeaf.bind(this)));
                this.registerEvent(this.app.workspace.on('layout-ready', () => __awaiter(this, void 0, void 0, function* () { return yield this.prepareIndex(); })));
            }
        });
    }
    onunload() {
        this.app.workspace
            .getLeavesOfType(VIEW_TYPE_TODO)
            .forEach(leaf => leaf.detach());
    }
    initLeaf() {
        if (this.app.workspace.getLeavesOfType(VIEW_TYPE_TODO).length) {
            return;
        }
        this.app.workspace.getRightLeaf(false).setViewState({
            type: VIEW_TYPE_TODO,
        });
    }
    prepareIndex() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.todoIndex.initialize();
        });
    }
    tick(todos) {
        this.view.setProps((currentProps) => {
            return Object.assign(Object.assign({}, currentProps), { todos: todos });
        });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
            yield this.todoIndex.reloadIndex(this.getTodoItemIndexProps());
        });
    }
    getSettingValue(setting) {
        return this.settings[setting];
    }
}

module.exports = ActionTrackerPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9jb25zdGFudHMudHMiLCJzcmMvbW9kZWwvVG9kb0l0ZW0udHMiLCJzcmMvbW9kZWwvVG9kb1BhcnNlci50cyIsInNyYy9tb2RlbC9Ub2RvSW5kZXgudHMiLCJzcmMvc2V0dGluZ3MudHMiLCJzcmMvdWkvaWNvbnMudHMiLCJzcmMvdWkvVG9kb0l0ZW1WaWV3LnRzIiwic3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20pIHtcclxuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGZyb20ubGVuZ3RoLCBqID0gdG8ubGVuZ3RoOyBpIDwgaWw7IGkrKywgaisrKVxyXG4gICAgICAgIHRvW2pdID0gZnJvbVtpXTtcclxuICAgIHJldHVybiB0bztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9UT0RPID1cclxuICAnb25saW5lLnpzdmljemlhbi5vYnNpZGlhbi1zdGFrZWhvbGRlcl9hY3Rpb24tcGx1Z2luJztcclxuIiwiZXhwb3J0IGVudW0gVG9kb0l0ZW1TdGF0dXMge1xyXG4gIFRvZG8sXHJcbiAgRG9uZSxcclxufVxyXG5cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1uYW1lc3BhY2VcclxuZXhwb3J0IG5hbWVzcGFjZSBUb2RvSXRlbVN0YXR1cyB7XHJcbiAgZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVN0YXR1cyhzdGF0dXM6IFRvZG9JdGVtU3RhdHVzKTogVG9kb0l0ZW1TdGF0dXMge1xyXG4gICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgY2FzZSBUb2RvSXRlbVN0YXR1cy5Ub2RvOlxyXG4gICAgICAgIHJldHVybiBUb2RvSXRlbVN0YXR1cy5Eb25lO1xyXG4gICAgICBjYXNlIFRvZG9JdGVtU3RhdHVzLkRvbmU6XHJcbiAgICAgICAgcmV0dXJuIFRvZG9JdGVtU3RhdHVzLlRvZG87XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb0l0ZW0ge1xyXG4gIHB1YmxpYyBzb3VyY2VGaWxlUGF0aDogc3RyaW5nO1xyXG4gIHB1YmxpYyBzdGFydEluZGV4OiBudW1iZXI7XHJcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xyXG4gIHB1YmxpYyBzdGF0dXM6IFRvZG9JdGVtU3RhdHVzO1xyXG4gIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHB1YmxpYyBwZXJzb246IHN0cmluZztcclxuICBwdWJsaWMgcHJvamVjdDogc3RyaW5nO1xyXG4gIHB1YmxpYyBtaXNjOiBzdHJpbmc7XHJcbiAgcHVibGljIGFjdGlvbkRhdGU/OiBEYXRlO1xyXG4gIHB1YmxpYyBpc1NvbWVkYXlNYXliZU5vdGU6IGJvb2xlYW47XHJcbiAgcHVibGljIGlzRGlzY3Vzc1dpdGhOb3RlOiBib29sZWFuO1xyXG4gIHB1YmxpYyBpc1dhaXRpbmdGb3JOb3RlOiBib29sZWFuO1xyXG4gIHB1YmxpYyBpc1Byb21pc2VkVG9Ob3RlOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHN0YXR1czogVG9kb0l0ZW1TdGF0dXMsXHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gICAgcGVyc29uOiBzdHJpbmcsXHJcbiAgICBwcm9qZWN0OiBzdHJpbmcsXHJcbiAgICBtaXNjOiBzdHJpbmcsXHJcbiAgICBpc1NvbWVkYXlNYXliZU5vdGU6IGJvb2xlYW4sXHJcbiAgICBpc0Rpc2N1c3NXaXRoTm90ZTogYm9vbGVhbixcclxuICAgIGlzV2FpdGluZ0Zvck5vdGU6IGJvb2xlYW4sXHJcbiAgICBpc1Byb21pc2VkVG9Ob3RlOiBib29sZWFuLFxyXG4gICAgc291cmNlRmlsZVBhdGg6IHN0cmluZyxcclxuICAgIHN0YXJ0SW5kZXg6IG51bWJlcixcclxuICAgIGxlbmd0aDogbnVtYmVyLFxyXG4gICAgYWN0aW9uRGF0ZT86IERhdGUsXHJcbiAgKSB7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgIHRoaXMucGVyc29uID0gcGVyc29uO1xyXG4gICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAgIHRoaXMubWlzYyA9IG1pc2M7XHJcbiAgICB0aGlzLmFjdGlvbkRhdGUgPSBhY3Rpb25EYXRlO1xyXG4gICAgdGhpcy5pc1NvbWVkYXlNYXliZU5vdGUgPSBpc1NvbWVkYXlNYXliZU5vdGU7XHJcbiAgICB0aGlzLmlzRGlzY3Vzc1dpdGhOb3RlID0gaXNEaXNjdXNzV2l0aE5vdGU7XHJcbiAgICB0aGlzLmlzV2FpdGluZ0Zvck5vdGUgPSBpc1dhaXRpbmdGb3JOb3RlO1xyXG4gICAgdGhpcy5pc1Byb21pc2VkVG9Ob3RlID0gaXNQcm9taXNlZFRvTm90ZTtcclxuICAgIHRoaXMuc291cmNlRmlsZVBhdGggPSBzb3VyY2VGaWxlUGF0aDtcclxuICAgIHRoaXMuc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVG9kb0l0ZW1JbmRleFByb3BzIH0gZnJvbSAnLi4vbW9kZWwvVG9kb0luZGV4JztcclxuaW1wb3J0IHsgVG9kb0l0ZW0sIFRvZG9JdGVtU3RhdHVzIH0gZnJvbSAnLi4vbW9kZWwvVG9kb0l0ZW0nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvZG9QYXJzZXIge1xyXG4gIHByb3BzOiBUb2RvSXRlbUluZGV4UHJvcHM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBUb2RvSXRlbUluZGV4UHJvcHMpIHtcclxuICAgIHRoaXMucHJvcHMgPSBwcm9wcztcclxuICB9XHJcblxyXG4gIGFzeW5jIHBhcnNlVGFza3MoXHJcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxyXG4gICAgZmlsZUNvbnRlbnRzOiBzdHJpbmcsXHJcbiAgKTogUHJvbWlzZTxUb2RvSXRlbVtdPiB7XHJcbiAgICBjb25zdCBwYXR0ZXJuID0gLygtfFxcKikgXFxbKFxcc3x4KT9cXF1cXHMoLiopL2c7XHJcbiAgICByZXR1cm4gWy4uLmZpbGVDb250ZW50cy5tYXRjaEFsbChwYXR0ZXJuKV0ubWFwKHRhc2sgPT5cclxuICAgICAgdGhpcy5wYXJzZVRhc2soZmlsZVBhdGgsIHRhc2spLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcGFyc2VUYXNrKGZpbGVQYXRoOiBzdHJpbmcsIGVudHJ5OiBSZWdFeHBNYXRjaEFycmF5KTogVG9kb0l0ZW0ge1xyXG4gICAgLy8gZGVidWdnZXI7XHJcbiAgICBjb25zdCB0b2RvSXRlbU9mZnNldCA9IDI7IC8vIFN0cmlwIG9mZiBgLXwqIGBcclxuICAgIGNvbnN0IHN0YXR1cyA9IGVudHJ5WzJdID09PSAneCcgPyBUb2RvSXRlbVN0YXR1cy5Eb25lIDogVG9kb0l0ZW1TdGF0dXMuVG9kbztcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZW50cnlbM107XHJcblxyXG4gICAgY29uc3QgZGF0ZU1hdGNoZXMgPSBkZXNjcmlwdGlvbi5tYXRjaCh0aGlzLnByb3BzLmRhdGVSZWdleHApO1xyXG4gICAgbGV0IGFjdGlvbkRhdGUgPSB1bmRlZmluZWQ7XHJcbiAgICBpZiAoZGF0ZU1hdGNoZXMgIT0gbnVsbCkge1xyXG48PDw8PDw8IEhFQUQ6bW9kZWwvVG9kb1BhcnNlci50c1xyXG4gICAgICBpZihkYXRlTWF0Y2hlcy5sZW5ndGggPT0gNCkge1xyXG4gICAgICAgIGFjdGlvbkRhdGUgPSBuZXcgRGF0ZShwYXJzZUludChkYXRlTWF0Y2hlc1sxXSksIHBhcnNlSW50KGRhdGVNYXRjaGVzWzJdKS0xLHBhcnNlSW50KGRhdGVNYXRjaGVzWzNdKSwwLCAwLCAwLCAwKTtcclxuICAgICAgfSBlbHNlIGlmIChkYXRlTWF0Y2hlcy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgIGFjdGlvbkRhdGUgPSBuZXcgRGF0ZShkYXRlTWF0Y2hlc1sxXSk7XHJcbiAgICAgIH0gXHJcbiAgICB9ICBcclxuPT09PT09PVxyXG4gICAgICBhY3Rpb25EYXRlID1cclxuICAgICAgICBkYXRlTWF0Y2hlcy5sZW5ndGggPiAzXHJcbiAgICAgICAgICA/IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KGRhdGVNYXRjaGVzWzFdKSxcclxuICAgICAgICAgICAgICBwYXJzZUludChkYXRlTWF0Y2hlc1syXSkgLSAxLFxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KGRhdGVNYXRjaGVzWzNdKSxcclxuICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIH1cclxuPj4+Pj4+PiA1NWJiN2ZkZjgzMmYyMGI4YjVjOTk1OWNkZDU2NThhNTQxZTdhMjZlOnNyYy9tb2RlbC9Ub2RvUGFyc2VyLnRzXHJcbiAgICBjb25zdCBwZXJzb25NYXRjaGVzID0gZGVzY3JpcHRpb24ubWF0Y2godGhpcy5wcm9wcy5wZXJzb25SZWdleHApO1xyXG4gICAgY29uc3QgcGVyc29uID0gcGVyc29uTWF0Y2hlcyAhPSBudWxsID8gcGVyc29uTWF0Y2hlc1sxXSA6ICcnO1xyXG5cclxuICAgIGNvbnN0IHByb2plY3RNYXRjaGVzID0gZGVzY3JpcHRpb24ubWF0Y2godGhpcy5wcm9wcy5wcm9qZWN0UmVnZXhwKTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0TWF0Y2hlcyAhPSBudWxsID8gcHJvamVjdE1hdGNoZXNbMV0gOiAnJztcclxuXHJcbiAgICBjb25zdCBtaXNjTWF0Y2hlcyA9IGRlc2NyaXB0aW9uLm1hdGNoKHRoaXMucHJvcHMubWlzY1JlZ2V4cCk7XHJcbiAgICBjb25zdCBtaXNjID0gbWlzY01hdGNoZXMgIT0gbnVsbCA/IG1pc2NNYXRjaGVzLmxlbmd0aCA9PSAyID8gbWlzY01hdGNoZXNbMV0gOiBcIlwiIDogXCJcIjtcclxuXHJcbiAgICByZXR1cm4gbmV3IFRvZG9JdGVtKFxyXG4gICAgICBzdGF0dXMsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICBwZXJzb24udG9Mb3dlckNhc2UoKSxcclxuICAgICAgcHJvamVjdC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICBtaXNjLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgIGRlc2NyaXB0aW9uLm1hdGNoKHRoaXMucHJvcHMuc29tZWRheU1heWJlUmVnZXhwKSAhPSBudWxsLFxyXG4gICAgICBkZXNjcmlwdGlvbi5tYXRjaCh0aGlzLnByb3BzLmRpc2N1c3NXaXRoUmVnZXhwKSAhPSBudWxsLFxyXG4gICAgICBkZXNjcmlwdGlvbi5tYXRjaCh0aGlzLnByb3BzLndhaXRpbmdGb3JSZWdleHApICE9IG51bGwsXHJcbiAgICAgIGRlc2NyaXB0aW9uLm1hdGNoKHRoaXMucHJvcHMucHJvbWlzZWRUb1JlZ2V4cCkgIT0gbnVsbCxcclxuICAgICAgZmlsZVBhdGgsXHJcbiAgICAgIChlbnRyeS5pbmRleCA/PyAwKSArIHRvZG9JdGVtT2Zmc2V0LFxyXG4gICAgICBlbnRyeVswXS5sZW5ndGggLSB0b2RvSXRlbU9mZnNldCxcclxuICAgICAgYWN0aW9uRGF0ZSxcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRBYnN0cmFjdEZpbGUsIFRGaWxlLCBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVG9kb0l0ZW0sIFRvZG9JdGVtU3RhdHVzIH0gZnJvbSAnLi4vbW9kZWwvVG9kb0l0ZW0nO1xyXG5pbXBvcnQgeyBUb2RvUGFyc2VyIH0gZnJvbSAnLi4vbW9kZWwvVG9kb1BhcnNlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvZG9JdGVtSW5kZXhQcm9wcyB7XHJcbjw8PDw8PDwgSEVBRDptb2RlbC9Ub2RvSW5kZXgudHNcclxuICBwZXJzb25SZWdleHA6ICAgICAgIFJlZ0V4cDtcclxuICBwcm9qZWN0UmVnZXhwOiAgICAgIFJlZ0V4cDtcclxuICBtaXNjUmVnZXhwOiAgICAgICAgIFJlZ0V4cDtcclxuICBkYXRlUmVnZXhwOiAgICAgICAgIFJlZ0V4cDtcclxuICBkaXNjdXNzV2l0aFJlZ2V4cDogIFJlZ0V4cDtcclxuICB3YWl0aW5nRm9yUmVnZXhwOiAgIFJlZ0V4cDtcclxuICBwcm9taXNlZFRvUmVnZXhwOiAgIFJlZ0V4cDtcclxuPT09PT09PVxyXG4gIHBlcnNvblJlZ2V4cDogUmVnRXhwO1xyXG4gIHByb2plY3RSZWdleHA6IFJlZ0V4cDtcclxuICBkYXRlUmVnZXhwOiBSZWdFeHA7XHJcbiAgZGlzY3Vzc1dpdGhSZWdleHA6IFJlZ0V4cDtcclxuICB3YWl0aW5nRm9yUmVnZXhwOiBSZWdFeHA7XHJcbiAgcHJvbWlzZWRUb1JlZ2V4cDogUmVnRXhwO1xyXG4+Pj4+Pj4+IDU1YmI3ZmRmODMyZjIwYjhiNWM5OTU5Y2RkNTY1OGE1NDFlN2EyNmU6c3JjL21vZGVsL1RvZG9JbmRleC50c1xyXG4gIHNvbWVkYXlNYXliZVJlZ2V4cDogUmVnRXhwO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb0luZGV4IHtcclxuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcclxuICBwcml2YXRlIHRvZG9zOiBNYXA8c3RyaW5nLCBUb2RvSXRlbVtdPjtcclxuICBwcml2YXRlIGxpc3RlbmVyczogKCh0b2RvczogVG9kb0l0ZW1bXSkgPT4gdm9pZClbXTtcclxuICBwcml2YXRlIHByb3BzOiBUb2RvSXRlbUluZGV4UHJvcHM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgdmF1bHQ6IFZhdWx0LFxyXG4gICAgbGlzdGVuZXI6ICh0b2RvczogVG9kb0l0ZW1bXSkgPT4gdm9pZCxcclxuICAgIHByb3BzOiBUb2RvSXRlbUluZGV4UHJvcHMsXHJcbiAgKSB7XHJcbiAgICB0aGlzLnByb3BzID0gcHJvcHM7XHJcbiAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XHJcbiAgICB0aGlzLnRvZG9zID0gbmV3IE1hcDxzdHJpbmcsIFRvZG9JdGVtW10+KCk7XHJcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtsaXN0ZW5lcl07XHJcbiAgfVxyXG5cclxuICBhc3luYyByZWxvYWRJbmRleChwcm9wczogVG9kb0l0ZW1JbmRleFByb3BzKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLnByb3BzID0gcHJvcHM7XHJcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyBUT0RPOiBwZXJzaXN0IGluZGV4ICYgbGFzdCBzeW5jIHRpbWVzdGFtcDsgb25seSBwYXJzZSBmaWxlcyB0aGF0IGNoYW5nZWQgc2luY2UgdGhlbi5cclxuICAgIGNvbnN0IHRvZG9NYXAgPSBuZXcgTWFwPHN0cmluZywgVG9kb0l0ZW1bXT4oKTtcclxuICAgIGxldCBudW1iZXJPZlRvZG9zID0gMDtcclxuICAgIGNvbnN0IHRpbWVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSB0aGlzLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBtYXJrZG93bkZpbGVzKSB7XHJcbiAgICAgIGNvbnN0IHRvZG9zID0gYXdhaXQgdGhpcy5wYXJzZVRvZG9zSW5GaWxlKGZpbGUpO1xyXG4gICAgICBudW1iZXJPZlRvZG9zICs9IHRvZG9zLmxlbmd0aDtcclxuICAgICAgaWYgKHRvZG9zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0b2RvTWFwLnNldChmaWxlLnBhdGgsIHRvZG9zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvdGFsVGltZU1zID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aW1lU3RhcnQ7XHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgYFtvYnNpZGlhbi1zdGFrZWhvbGRlcl9hY3Rpb24tcGx1Z2luXSBQYXJzZWQgJHtudW1iZXJPZlRvZG9zfSBUT0RPcyBmcm9tICR7XHJcbiAgICAgICAgbWFya2Rvd25GaWxlcy5sZW5ndGhcclxuICAgICAgfSBtYXJrZG93biBmaWxlcyBpbiAoJHt0b3RhbFRpbWVNcyAvIDEwMDAuMH1zKWAsXHJcbiAgICApO1xyXG4gICAgdGhpcy50b2RvcyA9IHRvZG9NYXA7XHJcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnRIYW5kbGVycygpO1xyXG4gICAgdGhpcy5pbnZva2VMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHNldFN0YXR1cyh0b2RvOiBUb2RvSXRlbSwgbmV3U3RhdHVzOiBUb2RvSXRlbVN0YXR1cyk6IHZvaWQge1xyXG4gICAgY29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRvZG8uc291cmNlRmlsZVBhdGgpIGFzIFRGaWxlO1xyXG4gICAgY29uc3QgZmlsZUNvbnRlbnRzID0gdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgZmlsZUNvbnRlbnRzLnRoZW4oKGM6IHN0cmluZykgPT4ge1xyXG4gICAgICBjb25zdCBuZXdUb2RvID0gYFske25ld1N0YXR1cyA9PT0gVG9kb0l0ZW1TdGF0dXMuRG9uZSA/ICd4JyA6ICcgJ31dICR7XHJcbiAgICAgICAgdG9kby5kZXNjcmlwdGlvblxyXG4gICAgICB9YDtcclxuICAgICAgY29uc3QgbmV3Q29udGVudHMgPVxyXG4gICAgICAgIGMuc3Vic3RyaW5nKDAsIHRvZG8uc3RhcnRJbmRleCkgK1xyXG4gICAgICAgIG5ld1RvZG8gK1xyXG4gICAgICAgIGMuc3Vic3RyaW5nKHRvZG8uc3RhcnRJbmRleCArIHRvZG8ubGVuZ3RoKTtcclxuICAgICAgdGhpcy52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudHMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluZGV4QWJzdHJhY3RGaWxlKGZpbGU6IFRBYnN0cmFjdEZpbGUpIHtcclxuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbmRleEZpbGUoZmlsZSBhcyBURmlsZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluZGV4RmlsZShmaWxlOiBURmlsZSkge1xyXG4gICAgdGhpcy5wYXJzZVRvZG9zSW5GaWxlKGZpbGUpLnRoZW4odG9kb3MgPT4ge1xyXG4gICAgICB0aGlzLnRvZG9zLnNldChmaWxlLnBhdGgsIHRvZG9zKTtcclxuICAgICAgdGhpcy5pbnZva2VMaXN0ZW5lcnMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjbGVhckluZGV4KHBhdGg6IHN0cmluZywgc2lsZW50ID0gZmFsc2UpIHtcclxuICAgIHRoaXMudG9kb3MuZGVsZXRlKHBhdGgpO1xyXG4gICAgaWYgKCFzaWxlbnQpIHtcclxuICAgICAgdGhpcy5pbnZva2VMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRQcm9wcyhcclxuICAgIHNldHRlcjogKGN1cnJlbnRQcm9wczogVG9kb0l0ZW1JbmRleFByb3BzKSA9PiBUb2RvSXRlbUluZGV4UHJvcHMsXHJcbiAgKTogdm9pZCB7XHJcbiAgICB0aGlzLnByb3BzID0gc2V0dGVyKHRoaXMucHJvcHMpO1xyXG4gICAgLy9kbyBJIG5lZWQgdG8gZG8gYW55dGhpbmcgZWxzZT8/XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHBhcnNlVG9kb3NJbkZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPFRvZG9JdGVtW10+IHtcclxuICAgIC8vIFRPRE86IERvZXMgaXQgbWFrZSBzZW5zZSB0byBpbmRleCBjb21wbGV0ZWQgVE9ET3MgYXQgYWxsP1xyXG4gICAgY29uc3QgdG9kb1BhcnNlciA9IG5ldyBUb2RvUGFyc2VyKHRoaXMucHJvcHMpO1xyXG4gICAgY29uc3QgZmlsZUNvbnRlbnRzID0gYXdhaXQgdGhpcy52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgcmV0dXJuIHRvZG9QYXJzZXJcclxuICAgICAgLnBhcnNlVGFza3MoZmlsZS5wYXRoLCBmaWxlQ29udGVudHMpXHJcbiAgICAgIC50aGVuKHRvZG9zID0+IHRvZG9zLmZpbHRlcih0b2RvID0+IHRvZG8uc3RhdHVzID09PSBUb2RvSXRlbVN0YXR1cy5Ub2RvKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlZ2lzdGVyRXZlbnRIYW5kbGVycygpIHtcclxuICAgIHRoaXMudmF1bHQub24oJ2NyZWF0ZScsIChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiB7XHJcbiAgICAgIHRoaXMuaW5kZXhBYnN0cmFjdEZpbGUoZmlsZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudmF1bHQub24oJ21vZGlmeScsIChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiB7XHJcbiAgICAgIHRoaXMuaW5kZXhBYnN0cmFjdEZpbGUoZmlsZSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMudmF1bHQub24oJ2RlbGV0ZScsIChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xlYXJJbmRleChmaWxlLnBhdGgpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBXZSBjb3VsZCBzaW1wbHkgY2hhbmdlIHRoZSByZWZlcmVuY2VzIHRvIHRoZSBvbGQgcGF0aCwgYnV0IHBhcnNpbmcgYWdhaW4gZG9lcyB0aGUgdHJpY2sgYXMgd2VsbFxyXG4gICAgdGhpcy52YXVsdC5vbigncmVuYW1lJywgKGZpbGU6IFRBYnN0cmFjdEZpbGUsIG9sZFBhdGg6IHN0cmluZykgPT4ge1xyXG4gICAgICB0aGlzLmNsZWFySW5kZXgob2xkUGF0aCk7XHJcbiAgICAgIHRoaXMuaW5kZXhBYnN0cmFjdEZpbGUoZmlsZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaW52b2tlTGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgdG9kb3MgPSAoW10gYXMgVG9kb0l0ZW1bXSkuY29uY2F0KC4uLkFycmF5LmZyb20odGhpcy50b2Rvcy52YWx1ZXMoKSkpO1xyXG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0b2RvcykpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBBY3Rpb25UcmFja2VyUGx1Z2luIGZyb20gJy4vbWFpbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvblRyYWNrZXJTZXR0aW5ncyB7XHJcbiAgcGVyc29uUmVnZXhwU3RyaW5nOiBzdHJpbmc7XHJcbiAgcHJvamVjdFJlZ2V4cFN0cmluZzogc3RyaW5nO1xyXG4gIGRhdGVSZWdleHBTdHJpbmc6IHN0cmluZztcclxuICBkaXNjdXNzV2l0aFJlZ2V4cFN0cmluZzogc3RyaW5nO1xyXG4gIHdhaXRpbmdGb3JSZWdleHBTdHJpbmc6IHN0cmluZztcclxuICBwcm9taXNlZFRvUmVnZXhwU3RyaW5nOiBzdHJpbmc7XHJcbiAgc29tZWRheU1heWJlUmVnZXhwU3RyaW5nOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBY3Rpb25UcmFja2VyU2V0dGluZ3MgPSB7XHJcbiAgcGVyc29uUmVnZXhwU3RyaW5nOiAnXFxcXFt7Mn1QZW9wbGVcXFxcLyguKj8pXFxcXF17Mn0nLFxyXG4gIHByb2plY3RSZWdleHBTdHJpbmc6ICdcXFxcW3syfVByb2plY3RzXFxcXC8oLio/KVxcXFxdezJ9JyxcclxuICBkYXRlUmVnZXhwU3RyaW5nOiAnIyhcXFxcZHs0fSlcXFxcLyhcXFxcZHsyfSlcXFxcLyhcXFxcZHsyfSknLFxyXG4gIGRpc2N1c3NXaXRoUmVnZXhwU3RyaW5nOiAnIyhkaXNjdXNzV2l0aCknLFxyXG4gIHdhaXRpbmdGb3JSZWdleHBTdHJpbmc6ICcjKHdhaXRpbmdGb3IpJyxcclxuICBwcm9taXNlZFRvUmVnZXhwU3RyaW5nOiAnIyhwcm9taXNlZFRvKScsXHJcbiAgc29tZWRheU1heWJlUmVnZXhwU3RyaW5nOiAnIyhzb21lZGF5KScsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQWN0aW9uVHJhY2tlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICBwbHVnaW46IEFjdGlvblRyYWNrZXJQbHVnaW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEFjdGlvblRyYWNrZXJQbHVnaW4pIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gIH1cclxuXHJcbiAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge1xyXG4gICAgICB0ZXh0OiAnU2V0dGluZ3MgZm9yIHRoZSBzdGFrZWhvbGRlciBhY3Rpb24gdHJhY2tlciBwbHVnaW4nLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdQZXJzb24gcmVnZXhwIHBhdHRlcm4nKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICAnVGhpcyBpcyB0aGUgcmVndWxhciBleHByZXNzaW9uIHRvIGlkZW50aWZ5IHRoZSBhY3Rpb24gcGFydHkgaW4gdGhlIGFjdGlvbi4gVXNlZCBmb3IgZmlsdGVyaW5nIHRvZG9zIGJ5IHBlcnNvbi4nLFxyXG4gICAgICApXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1xcXFxbezJ9UGVvcGxlXFxcXC8oLio/KVxcXFxdezJ9JylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJzb25SZWdleHBTdHJpbmcpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJzb25SZWdleHBTdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1Byb2plY3QgcmVnZXhwIHBhdHRlcm4nKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICAnVGhpcyBpcyB0aGUgcmVndWxhciBleHByZXNzaW9uIHRvIGlkZW50aWZ5IHRoZSBwcm9qZWN0IGluIHRoZSBhY3Rpb24uIFVzZWQgZm9yIGZpbHRlcmluZyB0b2RvcyBieSBwcm9qZWN0IG5hbWUuJyxcclxuICAgICAgKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcXFxcW3syfVByb2plY3RzXFxcXC8oLio/KVxcXFxdezJ9JylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm9qZWN0UmVnZXhwU3RyaW5nKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvamVjdFJlZ2V4cFN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnRGF0ZSByZWdleHAgcGF0dGVybicpXHJcbiAgICAgIC5zZXREZXNjKFxyXG4gICAgICAgICdUaGlzIGlzIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gdG8gZ2V0IHRoZSBkYXRlIGZvciBhbiBhY3Rpb24uIFRoZSBSZWdFeHAgbmVlZHMgdG8gY2FwdHVyZSAzIHZhbHVlcy4gVGhlIGZpcnN0IG9uZSBzaG91bGQgYmUgdGhlIHllYXIgKHl5eXkpLCB0aGUgc2Nlb25kIHRoZSBtb250aCAobW0pLCB0aGUgdGhpcmQgdGhlIGRheSAoZGQpLicsXHJcbiAgICAgIClcclxuICAgICAgLmFkZFRleHQodGV4dCA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignIyhcXFxcZHs0fSlcXFxcLyhcXFxcZHsyfSlcXFxcLyhcXFxcZHsyfSknKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVSZWdleHBTdHJpbmcpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlUmVnZXhwU3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdEaXNjdXNzIFdpdGggcmVnZXhwIHBhdHRlcm4nKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICAnVGhpcyBpcyB0aGUgcmVnZXhwIHBhdHRlcm4geW91IHVzZSB0byBtYXJrIHRvcGljcyB5b3Ugd2FudCB0byBkaXNjdXNzIHdpdGggc29tZW9uZS4gXCJEaXNjdXNzIHdpdGhcIiwgXCJQcm9taXNlZCB0b1wiLCBhbmQgXCJXYWl0aW5nIGZvclwiIGFjdGlvbnMgc2hvdyB1cCB1bmRlciB0aGUgU3Rha2Vob2xkZXIgQWN0aW9ucyB0YWIuJyxcclxuICAgICAgKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcjKGRpc2N1c3NXaXRoKScpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzY3Vzc1dpdGhSZWdleHBTdHJpbmcpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNjdXNzV2l0aFJlZ2V4cFN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICApO1xyXG5cclxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAuc2V0TmFtZSgnV2FpdGluZyBGb3IgcmVnZXhwIHBhdHRlcm4nKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICAnVGhpcyBpcyB0aGUgcmVnZXhwIHBhdHRlcm4geW91IHVzZSB0byBtYXJrIHRvcGljcyBzb21lb25lIGhhcyBwcm9taXNlZCB0byBkZWxpdmVyIHRvIG1lLiBcIkRpc2N1c3Mgd2l0aFwiLCBcIlByb21pc2VkIHRvXCIsIGFuZCBcIldhaXRpbmcgZm9yXCIgYWN0aW9ucyBzaG93IHVwIHVuZGVyIHRoZSBTdGFrZWhvbGRlciBBY3Rpb25zIHRhYi4nLFxyXG4gICAgICApXHJcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cclxuICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJyMod2FpdGluZ0ZvciknKVxyXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndhaXRpbmdGb3JSZWdleHBTdHJpbmcpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53YWl0aW5nRm9yUmVnZXhwU3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgfSksXHJcbiAgICAgICk7XHJcblxyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKCdQcm9taXNlZCBUbyByZWdleHAgcGF0dGVybicpXHJcbiAgICAgIC5zZXREZXNjKFxyXG4gICAgICAgICdUaGlzIGlzIHRoZSByZWdleHAgcGF0dGVybiB5b3UgdXNlIHRvIG1hcmsgdG9waWNzIHNvbWVvbmUgaGFzIHByb21pc2VkIHRvIGRlbGl2ZXIgdG8gbWUuIFwiRGlzY3VzcyB3aXRoXCIsIFwiUHJvbWlzZWQgdG9cIiwgYW5kIFwiV2FpdGluZyBmb3JcIiBhY3Rpb25zIHNob3cgdXAgdW5kZXIgdGhlIFN0YWtlaG9sZGVyIEFjdGlvbnMgdGFiLicsXHJcbiAgICAgIClcclxuICAgICAgLmFkZFRleHQodGV4dCA9PlxyXG4gICAgICAgIHRleHRcclxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignIyhwcm9taXNlZFRvKScpXHJcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvbWlzZWRUb1JlZ2V4cFN0cmluZylcclxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb21pc2VkVG9SZWdleHBTdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgKTtcclxuXHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUoJ1NvbWVkYXkgTWF5YmUgcmVnZXhwIHBhdHRlcm4nKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICAnVGhpcyBpcyB0aGUgcmVnZXhwIHBhdHRlcm4geW91IHVzZSB0byBtYXJrIGFjdGlvbnMgZGVsaWJlcmF0ZWx5IHdpdGhvdXQgYSBkZWFkbGluZSAtIGkuZS4gYnVja2V0IGxpc3QuIEFjdGlvbnMgd2l0aG91dCBhIHZhbGlkIHRhZyBhbmQgd2l0aG91dCBhIGRlYWRsaW5lIHdpbGwgc2hvdyB1cCBpbiB0aGUgSW5ib3guJyxcclxuICAgICAgKVxyXG4gICAgICAuYWRkVGV4dCh0ZXh0ID0+XHJcbiAgICAgICAgdGV4dFxyXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcjKHNvbWVkYXkpJylcclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb21lZGF5TWF5YmVSZWdleHBTdHJpbmcpXHJcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb21lZGF5TWF5YmVSZWdleHBTdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICB9KSxcclxuICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGVudW0gSWNvbiB7XHJcbiAgSW5ib3gsXHJcbiAgUmV2ZWFsLFxyXG4gIFNjaGVkdWxlZCxcclxuICBTb21lZGF5LFxyXG4gIFRvZGF5LFxyXG4gIFN0YWtlaG9sZGVyLFxyXG4gIEFnaW5nLFxyXG4gIFNvcnQsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBSZW5kZXJJY29uID0gKFxyXG4gIGljb246IEljb24sXHJcbiAgdGl0bGUgPSAnJyxcclxuICBkZXNjcmlwdGlvbiA9ICcnLFxyXG4pOiBIVE1MRWxlbWVudCA9PiB7XHJcbiAgY29uc3Qgc3ZnID0gc3ZnRm9ySWNvbihpY29uKSh0aXRsZSwgZGVzY3JpcHRpb24pO1xyXG4gIHJldHVybiBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHN2ZywgJ3RleHQveG1sJykuZG9jdW1lbnRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG5cclxuY29uc3Qgc3ZnRm9ySWNvbiA9IChpY29uOiBJY29uKTogKChhcmcwOiBzdHJpbmcsIGFyZzE6IHN0cmluZykgPT4gc3RyaW5nKSA9PiB7XHJcbiAgc3dpdGNoIChpY29uKSB7XHJcbiAgICBjYXNlIEljb24uSW5ib3g6XHJcbiAgICAgIHJldHVybiBpbmJveEljb247XHJcbiAgICBjYXNlIEljb24uUmV2ZWFsOlxyXG4gICAgICByZXR1cm4gcmV2ZWFsSWNvbjtcclxuICAgIGNhc2UgSWNvbi5TY2hlZHVsZWQ6XHJcbiAgICAgIHJldHVybiBzY2hlZHVsZWRJY29uO1xyXG4gICAgY2FzZSBJY29uLlNvbWVkYXk6XHJcbiAgICAgIHJldHVybiBzb21lZGF5SWNvbjtcclxuICAgIGNhc2UgSWNvbi5Ub2RheTpcclxuICAgICAgcmV0dXJuIHRvZGF5SWNvbjtcclxuICAgIGNhc2UgSWNvbi5TdGFrZWhvbGRlcjpcclxuICAgICAgcmV0dXJuIHN0YWtlaG9sZGVySWNvbjtcclxuICAgIGNhc2UgSWNvbi5BZ2luZzpcclxuICAgICAgcmV0dXJuIGFnaW5nSWNvbjtcclxuICAgIGNhc2UgSWNvbi5Tb3J0OlxyXG4gICAgICByZXR1cm4gc29ydEljb247XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgaW5ib3hJY29uID0gKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFxyXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgYXJpYS1sYWJlbD1cIiR7XHJcbiAgdGl0bGUgKyBkZXNjcmlwdGlvblxyXG59XCI+XHJcbiAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cclxuICA8ZGVzY3JpcHRpb24+JHtkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPlxyXG4gIDxwYXRoIGQ9XCJNMCAwaDI0djI0SDBWMHpcIiBmaWxsPVwibm9uZVwiLz5cclxuICA8cGF0aCBkPVwiTTE5IDNINWMtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuODkgMiAyIDJoMTRjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnptMCAxNkg1di0zaDMuNTZjLjY5IDEuMTkgMS45NyAyIDMuNDUgMnMyLjc1LS44MSAzLjQ1LTJIMTl2M3ptMC01aC00Ljk5YzAgMS4xLS45IDItMiAycy0yLS45LTItMkg1VjVoMTR2OXpcIi8+XHJcbjwvc3ZnPlxyXG5gO1xyXG5cclxuY29uc3QgcmV2ZWFsSWNvbiA9ICh0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IGBcclxuPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDI0IDI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHJvbGU9XCJpbWdcIiBhcmlhLWxhYmVsPVwiJHtcclxuICB0aXRsZSArIGRlc2NyaXB0aW9uXHJcbn1cIj5cclxuICA8dGl0bGU+JHt0aXRsZX08L3RpdGxlPlxyXG4gIDxkZXNjcmlwdGlvbj4ke2Rlc2NyaXB0aW9ufTwvZGVzY3JpcHRpb24+XHJcbiAgPHJlY3QgZmlsbD1cIm5vbmVcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIi8+PHBhdGggZD1cIk05LDV2Mmg2LjU5TDQsMTguNTlMNS40MSwyMEwxNyw4LjQxVjE1aDJWNUg5elwiLz5cclxuPC9zdmc+XHJcbmA7XHJcblxyXG5jb25zdCBzY2hlZHVsZWRJY29uID0gKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFxyXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgYXJpYS1sYWJlbD1cIiR7XHJcbiAgdGl0bGUgKyBkZXNjcmlwdGlvblxyXG59XCI+XHJcbiAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cclxuICA8ZGVzY3JpcHRpb24+JHtkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPlxyXG4gIDxwYXRoIGQ9XCJNMCAwaDI0djI0SDBWMHpcIiBmaWxsPVwibm9uZVwiLz5cclxuICA8cGF0aCBkPVwiTTIwIDNoLTFWMWgtMnYySDdWMUg1djJINGMtMS4xIDAtMiAuOS0yIDJ2MTZjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE4SDRWMTBoMTZ2MTF6bTAtMTNINFY1aDE2djN6XCIvPlxyXG48L3N2Zz5cclxuYDtcclxuXHJcbmNvbnN0IHNvbWVkYXlJY29uID0gKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFxyXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBlbmFibGUtYmFja2dyb3VuZD1cIm5ldyAwIDAgMjQgMjRcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgYXJpYS1sYWJlbD1cIiR7XHJcbiAgdGl0bGUgKyBkZXNjcmlwdGlvblxyXG59XCI+XHJcbiAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cclxuICA8ZGVzY3JpcHRpb24+JHtkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPlxyXG4gIDxnPjxyZWN0IGZpbGw9XCJub25lXCIgaGVpZ2h0PVwiMjRcIiB3aWR0aD1cIjI0XCIvPjwvZz5cclxuICA8Zz48Zz48cGF0aCBkPVwiTTIwLDJINEMzLDIsMiwyLjksMiw0djMuMDFDMiw3LjczLDIuNDMsOC4zNSwzLDguN1YyMGMwLDEuMSwxLjEsMiwyLDJoMTRjMC45LDAsMi0wLjksMi0yVjguN2MwLjU3LTAuMzUsMS0wLjk3LDEtMS42OVY0IEMyMiwyLjksMjEsMiwyMCwyeiBNMTksMjBINVY5aDE0VjIweiBNMjAsN0g0VjRoMTZWN3pcIi8+PHJlY3QgaGVpZ2h0PVwiMlwiIHdpZHRoPVwiNlwiIHg9XCI5XCIgeT1cIjEyXCIvPjwvZz48L2c+XHJcbjwvc3ZnPlxyXG5gO1xyXG5cclxuY29uc3QgdG9kYXlJY29uID0gKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFxyXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgYXJpYS1sYWJlbD1cIiR7XHJcbiAgdGl0bGUgKyBkZXNjcmlwdGlvblxyXG59XCI+XHJcbiAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cclxuICA8ZGVzY3JpcHRpb24+JHtkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPlxyXG4gIDxwYXRoIGQ9XCJNMCAwaDI0djI0SDBWMHpcIiBmaWxsPVwibm9uZVwiLz5cclxuICA8cGF0aCBkPVwiTTIyIDkuMjRsLTcuMTktLjYyTDEyIDIgOS4xOSA4LjYzIDIgOS4yNGw1LjQ2IDQuNzNMNS44MiAyMSAxMiAxNy4yNyAxOC4xOCAyMWwtMS42My03LjAzTDIyIDkuMjR6TTEyIDE1LjRsLTMuNzYgMi4yNyAxLTQuMjgtMy4zMi0yLjg4IDQuMzgtLjM4TDEyIDYuMWwxLjcxIDQuMDQgNC4zOC4zOC0zLjMyIDIuODggMSA0LjI4TDEyIDE1LjR6XCIvPlxyXG48L3N2Zz5cclxuYDtcclxuXHJcbmNvbnN0IHN0YWtlaG9sZGVySWNvbiA9ICh0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nKTogc3RyaW5nID0+IGBcclxuPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZW5hYmxlLWJhY2tncm91bmQ9XCJuZXcgMCAwIDE2IDI0XCIgd2lkdGg9XCIxNlwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAxNiAyNFwiIGFyaWEtbGFiZWw9XCIke1xyXG4gIHRpdGxlICsgZGVzY3JpcHRpb25cclxufVwiPlxyXG4gIDx0aXRsZT4ke3RpdGxlfTwvdGl0bGU+XHJcbiAgPGRlc2NyaXB0aW9uPiR7ZGVzY3JpcHRpb259PC9kZXNjcmlwdGlvbj5cclxuICA8cGF0aCBkPVwiTTAgMGgyNHYxNkgwVjB6XCIgZmlsbD1cIm5vbmVcIi8+XHJcbiAgPHBhdGggIGQ9XCJNIDEyLjA0MTYxNyAwLjM3OTM5NSBDIDE0Ljc4MzA3MiAtMC4zODUyNTQgMTcuODQ0NTk2IDAuNjQ4NDM4IDIwLjMzNTU2MyAyLjAyMTk3MyBDIDIyLjgyNjUyOSAzLjM5NTUwOCAyNS43MDcxNDUgNS43NDYwOTQgMjYuOTczNTAyIDguNjA2NDQ1IEMgMjguMjM5ODYgMTEuNDgwOTU3IDI4LjkyMTc0NCAxNi4xODIxMjkgMjcuOTMzNzA3IDE5LjIyNjU2MiBDIDI2Ljk0NTY3IDIyLjI3MDk5NiAyMy43NDQ5ODYgMjUuNDcxMTkxIDIxLjA1OTE5NSAyNi45MDEzNjcgQyAxOC4zNTk0ODggMjguMzQ1NzAzIDE0LjY4NTY2IDI4LjYyODkwNiAxMS43NzcyMTMgMjcuODY0MjU4IEMgOC44Njg3NjYgMjcuMDk5NjA5IDUuNTg0NTg2IDI0LjYzNTc0MiAzLjU2Njc2NCAyMi4yOTkzMTYgQyAxLjU2Mjg1OCAxOS45NjI4OTEgLTAuMjQ2MjI0IDE2Ljk2MDkzOCAtMC4zMDE4ODkgMTMuODc0MDIzIEMgLTAuMzU3NTUzIDEwLjc4NzEwOSAwLjgxMTM5MyA2LjEyODQxOCAzLjIwNDk0NyAzLjgwNjE1MiBDIDUuNTk4NTAyIDEuNDgzODg3IDExLjg4ODU0MSAwLjM3OTM5NSAxNC4wODcyNzIgLTAuMDczNzMwNSBDIDE2LjI5OTkxOCAtMC41MjY4NTUgMTYuNDgwODI2IDAuNzYxNzE5IDE2LjQzOTA3OCAxLjA1OTA4MiBNIDE4LjkwMjIxMyAtMC4yMDExNzIgQyAyMS42Mjk3NTIgMC4zMDg1OTQgMjUuNDg0NDg4IDMuNjIyMDcgMjYuOTQ1NjcgNi4zOTc0NjEgQyAyOC40MjA3NjggOS4xNzI4NTIgMjguNTMyMDk2IDEzLjUyMDAyIDI3LjY5NzEzNSAxNi40MjI4NTIgQyAyNi44NzYwOSAxOS4zMjU2ODQgMjQuMjQ1OTYzIDIyLjEwMTA3NCAyMS45NjM3MzYgMjMuODE0NDUzIEMgMTkuNjgxNTEgMjUuNTEzNjcyIDE3LjEzNDg3OSAyNi4zNDkxMjEgMTQuMDMxNjA4IDI2LjY2MDY0NSBDIDEwLjk0MjI1MiAyNi45NTgwMDggNS44MjExNTggMjcuNTI0NDE0IDMuMzg1ODU2IDI1LjY1NTI3MyBDIDAuOTUwNTUzIDIzLjgwMDI5MyAtMC41ODAyMDkgMTguNDc2MDc0IC0wLjU5NDEyNSAxNS40ODgyODEgQyAtMC42MDgwNDEgMTIuNTAwNDg4IDEuNzI5ODUgMTAuMDIyNDYxIDMuMzAyMzYgNy43Mjg1MTYgQyA0Ljg3NDg2OSA1LjQzNDU3IDYuMTEzMzk1IDIuOTcwNzAzIDguODQwOTM0IDEuNzI0NjA5IEMgMTEuNTY4NDczIDAuNDc4NTE2IDE4LjA1MzMzNiAwLjIzNzc5MyAxOS42Mzk3NjIgMC4yMzc3OTMgQyAyMS4yMjYxODggMC4yMjM2MzMgMTguNTI2NDgxIDEuNTEyMjA3IDE4LjM4NzMyIDEuNjk2Mjg5IFwiIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjI4MDcwMiwwLDAsMC4yNzU4NjIsMy4yMzcwODQsMi43NTg2MjEpXCIvPlxyXG4gIDxwYXRoICBkPVwiTSAtMC4yNjA4ODQgLTE3LjQ5NzczMSBDIC0wLjY2NDQ0OSAtMjEuMjA3NjkyIC0zLjQwNTkwNCAtMzQuNzMwNjQxIC0yLjc3OTY4MyAtMzkuOTQxNTc4IEMgLTIuMTUzNDYzIC00NS4xNTI1MTYgMC4xMTQ4NDggLTQ2Ljg5NDIxNSAzLjQ4MjUyNCAtNDguNzQ5MTk2IEMgNi44NTAyIC01MC41OTAwMTYgMTMuMDk4NDkxIC01MS40Njc5NDYgMTcuNDQwMjg3IC01MS4wMjg5ODEgQyAyMS43ODIwODQgLTUwLjU5MDAxNiAyNy4wNDIzMzggLTUxLjY5NDUwOCAyOS41MTkzODkgLTQ2LjEyOTU2NyBDIDMxLjk5NjQ0IC00MC41NjQ2MjUgMzcuMjQyNzc4IC0yMi41OTUzODcgMzIuMjc0NzYgLTE3LjYzOTMzMiBDIDI3LjMyMDY1OSAtMTIuNjgzMjc4IDUuMTI0NjE0IC0xNi41MDY1MiAtMC4yNDY5NjggLTE2LjM5MzIzOCBNIC0xLjUxMzMyNiAtMTguNzI5NjY0IEMgLTEuNTU1MDc0IC0yMi43MDg2NjggLTEuMTkzMjU3IC0zNi43MjcyMjMgLTAuNDY5NjI1IC00MS40OTkxOTYgQyAwLjI1NDAwOCAtNDYuMjU3MDA4IC0wLjEwNzgwOCAtNDUuODg4ODQ0IDIuODE0NTU1IC00Ny4yOTA2OTkgQyA1LjczNjkxOCAtNDguNjkyNTU1IDEyLjMwNTI3OCAtNTAuMDk0NDEgMTcuMDkyMzg3IC00OS45Mzg2NDkgQyAyMS44NjU1OCAtNDkuNzY4NzI3IDI5LjI2ODkwMSAtNTEuNTM4NzQ2IDMxLjUyMzI5NSAtNDYuMzEzNjQ5IEMgMzMuNzc3NjkgLTQxLjA4ODU1MSAzNS43NTM3NjQgLTIzLjQzMDgzNiAzMC41OTA5MjIgLTE4LjYwMjIyMyBDIDI1LjQ0MTk5NiAtMTMuNzczNjEgNS44MjA0MTQgLTE3LjU4MjY5MiAwLjYwMTkwOSAtMTcuMzU2MTI5IFwiIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjI4MDcwMiwwLDAsMC4yNzU4NjIsMy42MTIyOTMsMjUuMzUwMzk4KVwiLz5cclxuPC9zdmc+XHJcbmA7XHJcblxyXG5jb25zdCBhZ2luZ0ljb24gPSAodGl0bGU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyk6IHN0cmluZyA9PiBgXHJcbjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjRcIiBhcmlhLWxhYmVsPVwiJHtcclxuICB0aXRsZSArIGRlc2NyaXB0aW9uXHJcbn1cIj5cclxuICA8dGl0bGU+JHt0aXRsZX08L3RpdGxlPlxyXG4gIDxkZXNjcmlwdGlvbj4ke2Rlc2NyaXB0aW9ufTwvZGVzY3JpcHRpb24+XHJcbiAgPGcgaWQ9XCJzdXJmYWNlMVwiPlxyXG4gIDxwYXRoIHN0eWxlPVwiZmlsbC1ydWxlOmV2ZW5vZGQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjE2O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2U6cmdiKDAlLDAlLDAlKTtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1taXRlcmxpbWl0OjQ7XCIgZD1cIk0gMjU0LjMzMzMzMyA0NjEuMTY2NjY3IEMgMTI1IDI4My44MzMzMzMgMTcyLjgzMzMzMyAyMi4zMzMzMzMgNTE4LjUgMTguMzMzMzMzIEMgODY0LjY2NjY2NyAxNy42NjY2NjcgOTI0LjY2NjY2NyAyOTUuODMzMzMzIDc5Mi44MzMzMzMgNDQ5LjY2NjY2NyBDIDgwMS4zMzMzMzMgNTMxLjUgODAxLjUgNjAwLjMzMzMzMyA3MzguNSA2MTguMzMzMzMzIEMgNzEyLjgzMzMzMyA3MjYuMzMzMzMzIDcyMi41IDc5NC41IDcwNy4xNjY2NjcgODI5LjY2NjY2NyBDIDYzNS4zMzMzMzMgOTU2LjY2NjY2NyA0MTAuODMzMzMzIDk2Mi41IDM0MCA4MzEuMTY2NjY3IEMgMzIzLjY2NjY2NyA3OTAgMzM3LjUgNzIyLjUgMzA1LjY2NjY2NyA2MTIuMTY2NjY3IEMgMjYxLjgzMzMzMyA1OTUuMTY2NjY3IDI0OC44MzMzMzMgNTQyLjY2NjY2NyAyNTQuMzMzMzMzIDQ2MS4xNjY2NjcgWiBNIDI1NC4zMzMzMzMgMjM4LjMzMzMzMyBDIDIzNi42NjY2NjcgMjc5IDI0NS4xNjY2NjcgMzA1IDI2MS42NjY2NjcgMzQ4LjUgQyAyNzIgMzc1LjMzMzMzMyAyNTkuNSA0MjkuMTY2NjY3IDI1NC4zMzMzMzMgNDYxLjE2NjY2NyBNIDc5Ny4xNjY2NjcgMjM4LjMzMzMzMyBDIDgwOS41IDI2NCA4MDcuMTY2NjY3IDI4OS44MzMzMzMgNzkwLjE2NjY2NyAzNDIuMzMzMzMzIEMgNzc4LjUgMzcyLjgzMzMzMyA3OTAuMTY2NjY3IDQxOS4xNjY2NjcgNzkyLjgzMzMzMyA0NDkuNjY2NjY3IE0gMzk0LjUgNjkzLjgzMzMzMyBDIDM4NCA2NTguNjY2NjY3IDM0MiA2MjMuNSAzMDUuNjY2NjY3IDYxMi4xNjY2NjcgTSA2NTUuMzMzMzMzIDY5MiBDIDY3MiA2NTAgNjk0LjUgNjIwIDczOC41IDYxOC4zMzMzMzMgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMDIzNDM3NSwwLDAsMC4wMjM0Mzc1LDAsMClcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJmaWxsOm5vbmU7c3Ryb2tlLXdpZHRoOjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZTpyZ2IoMCUsMCUsMCUpO3N0cm9rZS1vcGFjaXR5OjE7c3Ryb2tlLW1pdGVybGltaXQ6NDtcIiBkPVwiTSAzNDAgNjI2IEMgMzYxIDY3NCAzNzIuMzMzMzMzIDcyNS44MzMzMzMgMzgwIDc3OSBDIDQyOC4xNjY2NjcgODQwIDU5NC4xNjY2NjcgODU4IDY2NSA3NzYgQyA2NjkuODMzMzMzIDcyNS4xNjY2NjcgNjg3LjY2NjY2NyA2NzUuNjY2NjY3IDcwNCA2MjYgTCA2NTUuMzMzMzMzIDY5MiBDIDY0OS42NjY2NjcgNzMzLjE2NjY2NyA0MDIgNzMwLjUgMzk0LjUgNjkzLjgzMzMzMyBaIE0gNDAzLjUgNzk4IEwgNDAzLjUgNzA2IE0gNDMyIDgxNSBMIDQzMyA3MTQgTSA0NjIuNSA4MjIgTCA0NjMgNzE5IE0gNDkyLjUgODI3LjUgQyA0OTIuNSA4MjUuNSA0OTMgNzIxLjUgNDkzIDcyMS41IE0gNTIzLjUgODMxIEwgNTIzIDcyMi41IE0gNTU0LjUgODI3IEwgNTU0IDcyMiBNIDU4MyA4MjIuNSBMIDU4MiA3MTkgTSA2MTUuNSA4MTAuNSBMIDYxNCA3MTUgTSA2NDQgNzk0IEwgNjQzIDcwNS41IE0gNjQyIDc1MC41IEMgNTYwLjUgNzg2IDQ4Ny44MzMzMzMgNzg4LjUgNDA0IDc1MC41IFwiIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjAyMzQzNzUsMCwwLDAuMDIzNDM3NSwwLDApXCIvPlxyXG4gIDxwYXRoIHN0eWxlPVwiIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpldmVub2RkO2ZpbGw6cmdiKDAlLDAlLDAlKTtmaWxsLW9wYWNpdHk6MTtcIiBkPVwiTSA3LjI1IDkuNzg5MDYyIEMgNy4xMTMyODEgMTAuMjgxMjUgNy4yMDcwMzEgMTAuOTEwMTU2IDcuMzgyODEyIDExLjQ2MDkzOCBDIDcuNjA1NDY5IDEyLjE1MjM0NCA4LjEwNTQ2OSAxMi41NjY0MDYgOC45NTMxMjUgMTIuNjMyODEyIEMgOS45Mjk2ODggMTIuNjU2MjUgMTAuNTU0Njg4IDEyLjA4OTg0NCAxMC45Njg3NSAxMS4xNzk2ODggQyAxMS4wODIwMzEgMTAuOTA2MjUgMTEuMTU2MjUgMTAuNDQ1MzEyIDExLjAzOTA2MiA5LjkzNzUgQyAxMC45Njg3NSA5LjY3OTY4OCAxMC42NDQ1MzEgOS4yOTY4NzUgMTAuMzI4MTI1IDkuMTAxNTYyIEMgOS43NTM5MDYgOC43NTM5MDYgNy40NzI2NTYgOC45NDkyMTkgNy4yNSA5Ljc4OTA2MiBaIE0gMTcuMzM5ODQ0IDkuNzI2NTYyIEMgMTcuNDcyNjU2IDEwLjIxODc1IDE3LjM3ODkwNiAxMC44NDc2NTYgMTcuMjAzMTI1IDExLjM5ODQzOCBDIDE2Ljk4NDM3NSAxMi4wODk4NDQgMTYuNDgwNDY5IDEyLjUwMzkwNiAxNS42MzI4MTIgMTIuNTcwMzEyIEMgMTQuNjU2MjUgMTIuNTkzNzUgMTQuMDM1MTU2IDEyLjAyNzM0NCAxMy42MTcxODggMTEuMTE3MTg4IEMgMTMuNTAzOTA2IDEwLjg0Mzc1IDEzLjQyOTY4OCAxMC4zODI4MTIgMTMuNTQ2ODc1IDkuODc1IEMgMTMuNjE3MTg4IDkuNjE3MTg4IDEzLjk0MTQwNiA5LjIzNDM3NSAxNC4yNTc4MTIgOS4wMzUxNTYgQyAxNC44MzU5MzggOC42OTE0MDYgMTcuMTEzMjgxIDguODg2NzE5IDE3LjMzOTg0NCA5LjcyNjU2MiBaIE0gMTIuMDM1MTU2IDEyIEwgMTIuMDM1MTU2IDE0Ljc2NTYyNSBDIDExLjYyNSAxNS4zODY3MTkgMTEuNDg0Mzc1IDE1LjQzMzU5NCAxMS4yNSAxNS40MjE4NzUgQyAxMC45NDE0MDYgMTUuNDIxODc1IDEwLjczNDM3NSAxNC45NjQ4NDQgMTAuNzkyOTY5IDE0LjQzNzUgQyAxMC45NDUzMTIgMTIuNzY5NTMxIDExLjQ0OTIxOSAxMi40MjU3ODEgMTIuMDM1MTU2IDEyIFogTSAxMi40NTMxMjUgMTIuMDExNzE5IEwgMTIuNDUzMTI1IDE0Ljc3NzM0NCBDIDEyLjg2MzI4MSAxNS4zOTg0MzggMTMuMDAzOTA2IDE1LjQ0NTMxMiAxMy4yMzgyODEgMTUuNDMzNTk0IEMgMTMuNTQyOTY5IDE1LjQzMzU5NCAxMy43NSAxNC45NzY1NjIgMTMuNjk1MzEyIDE0LjQ0OTIxOSBDIDEzLjU0Mjk2OSAxMi43ODEyNSAxMy4wMzkwNjIgMTIuNDM3NSAxMi40NTMxMjUgMTIuMDExNzE5IFogTSAxMi40NTMxMjUgMTIuMDExNzE5IFwiLz5cclxuICA8L2c+XHJcbjwvc3ZnPlxyXG5gO1xyXG48PDw8PDw8IEhFQUQ6dWkvaWNvbnMudHNcclxuXHJcbmNvbnN0IHNvcnRJY29uID0gKHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBzdHJpbmcgPT4gYFxyXG48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDIwIDI0XCI+IGFyaWEtbGFiZWw9XCIke3RpdGxlICsgZGVzY3JpcHRpb259XCI+XHJcbiAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cclxuICA8ZGVzY3JpcHRpb24+JHtkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPlxyXG4gIDxwYXRoIHN0eWxlPVwic3Ryb2tlLXdpZHRoOjQ7XCIgZD1cIk0gMCAwIEMgMCAxMy4zMzk4NDQgMCA2Ni42NjAxNTYgMCA4MCBNIDAgMCBDIDAgMTMuMzM5ODQ0IDAgNjYuNjYwMTU2IDAgODAgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMiwwLDAsMC4yLDIsNilcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJzdHJva2Utd2lkdGg6NDtcIiBkPVwiTSAtMTAuMjUzOTA2IDUxLjgxNjQwNiBDIC03LjM0Mzc1IDU5LjgwNDY4OCAtNC40MzM1OTQgNjcuNzkyOTY5IDAgODAgTSAtMTAuMjUzOTA2IDUxLjgxNjQwNiBDIC03LjY1NjI1IDU4Ljk4NDM3NSAtNS4wMzkwNjIgNjYuMTcxODc1IDAgODAgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMiwwLDAsMC4yLDIsNilcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJzdHJva2Utd2lkdGg6NDtcIiBkPVwiTSAxMC4yNTM5MDYgNTEuODE2NDA2IEMgNy4zNDM3NSA1OS44MDQ2ODggNC40MzM1OTQgNjcuNzkyOTY5IDAgODAgTSAxMC4yNTM5MDYgNTEuODE2NDA2IEMgNy42NTYyNSA1OC45ODQzNzUgNS4wMzkwNjIgNjYuMTcxODc1IDAgODAgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMiwwLDAsMC4yLDIsNilcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJzdHJva2Utd2lkdGg6NDtcIiBkPVwiTSAwIDAgQyAwIC0xMy4zMzk4NDQgMCAtNjYuNjYwMTU2IDAgLTgwIE0gMCAwIEMgMCAtMTMuMzM5ODQ0IDAgLTY2LjY2MDE1NiAwIC04MCBcIiB0cmFuc2Zvcm09XCJtYXRyaXgoMC4yLDAsMCwwLjIsMTgsMTgpXCIvPlxyXG4gIDxwYXRoIHN0eWxlPVwic3Ryb2tlLXdpZHRoOjQ7XCIgZD1cIk0gMTAuMjUzOTA2IC01MS44MTY0MDYgQyA2Ljk5MjE4OCAtNjAuNzgxMjUgMy43MzA0NjkgLTY5Ljc0NjA5NCAwIC04MCBNIDEwLjI1MzkwNiAtNTEuODE2NDA2IEMgNy4xMDkzNzUgLTYwLjQ4ODI4MSAzLjk0NTMxMiAtNjkuMTc5Njg4IDAgLTgwIFwiIHRyYW5zZm9ybT1cIm1hdHJpeCgwLjIsMCwwLDAuMiwxOCwxOClcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJzdHJva2Utd2lkdGg6NDtcIiBkPVwiTSAtMTAuMjUzOTA2IC01MS44MTY0MDYgQyAtNi45OTIxODggLTYwLjc4MTI1IC0zLjczMDQ2OSAtNjkuNzQ2MDk0IDAgLTgwIE0gLTEwLjI1MzkwNiAtNTEuODE2NDA2IEMgLTcuMTA5Mzc1IC02MC40ODgyODEgLTMuOTQ1MzEyIC02OS4xNzk2ODggMCAtODAgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMiwwLDAsMC4yLDE4LDE4KVwiLz5cclxuICA8cGF0aCBzdHlsZT1cInN0cm9rZS13aWR0aDo0O1wiIGQ9XCJNIDAgMCBDIDYuNjYwMTU2IDAgMzMuMzM5ODQ0IDAgNDAgMCBNIDAgMCBDIDYuNjYwMTU2IDAgMzMuMzM5ODQ0IDAgNDAgMCBcIiB0cmFuc2Zvcm09XCJtYXRyaXgoMC4yLDAsMCwwLjIsNiw2KVwiLz5cclxuICA8cGF0aCBzdHlsZT1cInN0cm9rZS13aWR0aDo0O1wiIGQ9XCJNIDAgMCBDIDYuNjYwMTU2IDAgMzMuMzM5ODQ0IDAgNDAgMCBNIDAgMCBDIDYuNjYwMTU2IDAgMzMuMzM5ODQ0IDAgNDAgMCBcIiB0cmFuc2Zvcm09XCJtYXRyaXgoMC4yLDAsMCwwLjIsNiwxMClcIi8+XHJcbiAgPHBhdGggc3R5bGU9XCJzdHJva2Utd2lkdGg6NDtcIiBkPVwiTSAwIDAgQyA2LjY2MDE1NiAwIDMzLjMzOTg0NCAwIDQwIDAgTSAwIDAgQyA2LjY2MDE1NiAwIDMzLjMzOTg0NCAwIDQwIDAgXCIgdHJhbnNmb3JtPVwibWF0cml4KDAuMiwwLDAsMC4yLDYsMTQpXCIvPlxyXG48L3N2Zz5cclxuYDtcclxuPT09PT09PVxyXG4+Pj4+Pj4+IDU1YmI3ZmRmODMyZjIwYjhiNWM5OTU5Y2RkNTY1OGE1NDFlN2EyNmU6c3JjL3VpL2ljb25zLnRzXHJcbiIsImltcG9ydCB7IEl0ZW1WaWV3LCBNYXJrZG93blJlbmRlcmVyLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBWSUVXX1RZUEVfVE9ETyB9IGZyb20gJy4uL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFRvZG9JdGVtLCBUb2RvSXRlbVN0YXR1cyB9IGZyb20gJy4uL21vZGVsL1RvZG9JdGVtJztcclxuaW1wb3J0IHsgUmVuZGVySWNvbiwgSWNvbiB9IGZyb20gJy4uL3VpL2ljb25zJztcclxuXHJcbmVudW0gVG9kb0l0ZW1WaWV3UGFuZSB7XHJcbiAgQWdpbmcsXHJcbiAgVG9kYXksXHJcbiAgU2NoZWR1bGVkLFxyXG4gIEluYm94LFxyXG4gIFNvbWVkYXksXHJcbiAgU3Rha2Vob2xkZXIsXHJcbn1cclxuXHJcbmVudW0gVG9kb1NvcnRTdGF0ZXMge1xyXG4gIE5vbmUgPSAwLFxyXG4gIERhdGVBc2MgPSAxLFxyXG4gIERhdGVEZXNjID0gMixcclxuICBTdGFrZWhvbGRlckFzYyA9IDMsXHJcbiAgU3Rha2Vob2xkZXJEZXNjID0gNCxcclxuICBQcm9qZWN0QXNjID0gNSxcclxuICBQcm9qZWN0RGVzYyA9IDYsXHJcbiAgTWlzY0FzYyA9IDcsXHJcbiAgTWlzY0Rlc2MgPSA4LCAgXHJcbiAgRnVsbFRleHRBc2MgPSA5LFxyXG4gIEZ1bGxUZXh0RGVzYyA9IDEwLFxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvZG9JdGVtVmlld1Byb3BzIHtcclxuICB0b2RvczogVG9kb0l0ZW1bXTtcclxuICBvcGVuRmlsZTogKGZpbGVQYXRoOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgdG9nZ2xlVG9kbzogKHRvZG86IFRvZG9JdGVtLCBuZXdTdGF0dXM6IFRvZG9JdGVtU3RhdHVzKSA9PiB2b2lkO1xyXG4gIGlzSW5ib3hWaXNpYmxlOiAgICAgICBib29sZWFuO1xyXG4gIGlzQWdpbmdWaXNpYmxlOiAgICAgICBib29sZWFuO1xyXG4gIGlzVG9kYXlWaXNpYmxlOiAgICAgICBib29sZWFuO1xyXG4gIGlzU2NoZWR1bGVkVmlzaWJsZTogICBib29sZWFuO1xyXG4gIGlzU3Rha2Vob2xkZXJWaXNpYmxlOiBib29sZWFuO1xyXG4gIGlzU29tZWRheVZpc2libGU6ICAgICBib29sZWFuO1xyXG4gIGluYm94VG9vbHRpcDogICAgICAgICBzdHJpbmc7XHJcbiAgYWdpbmdUb29sdGlwOiAgICAgICAgIHN0cmluZztcclxuICB0b2RheVRvb2x0aXA6ICAgICAgICAgc3RyaW5nO1xyXG4gIHNjaGVkdWxlZFRvb2x0aXA6ICAgICBzdHJpbmc7XHJcbiAgc3Rha2Vob2xkZXJUb29sdGlwOiAgIHN0cmluZztcclxuICBzb21lZGF5VG9vbHRpcDogICAgICAgc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVG9kb0l0ZW1WaWV3U3RhdGUge1xyXG4gIGFjdGl2ZVBhbmU6IFRvZG9JdGVtVmlld1BhbmU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUb2RvU29ydFN0YXRlIHtcclxuICBzdGF0ZTogVG9kb1NvcnRTdGF0ZXMsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvSXRlbVZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgcHJpdmF0ZSBwcm9wczogVG9kb0l0ZW1WaWV3UHJvcHM7XHJcbiAgcHJpdmF0ZSBzdGF0ZTogVG9kb0l0ZW1WaWV3U3RhdGU7XHJcbiAgcHJpdmF0ZSBzb3J0U3RhdGU6IFRvZG9Tb3J0U3RhdGU7XHJcbiAgcHJpdmF0ZSBmaWx0ZXI6IHN0cmluZztcclxuICBwcml2YXRlIGZpbHRlclJlZ2V4cDogUmVnRXhwO1xyXG4gIHByaXZhdGUgc29ydFN0YXRlQ291bnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHByb3BzOiBUb2RvSXRlbVZpZXdQcm9wcykge1xyXG4gICAgLy9kZWJ1Z2dlcjtcclxuICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgdGhpcy5wcm9wcyA9IHByb3BzO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgYWN0aXZlUGFuZTogVG9kb0l0ZW1WaWV3UGFuZS5Ub2RheSxcclxuICAgIH07XHJcbiAgICB0aGlzLnNvcnRTdGF0ZSA9IHtcclxuICAgICAgc3RhdGU6IFRvZG9Tb3J0U3RhdGVzLk5vbmUsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5zb3J0U3RhdGVDb3VudCA9IE9iamVjdC52YWx1ZXMoVG9kb1NvcnRTdGF0ZXMpLmxlbmd0aC8yO1xyXG4gICAgdGhpcy5maWx0ZXIgPSAnJztcclxuICB9XHJcbiAgXHJcbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBWSUVXX1RZUEVfVE9ETztcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gJ1RvZG8nO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuICdjaGVja21hcmsnO1xyXG4gIH1cclxuXHJcbiAgb25DbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXREaXNwbGF5UHJvcHMocHJvcHM6IFRvZG9JdGVtVmlld1Byb3BzKSB7XHJcbiAgICB0aGlzLnByb3BzLmlzSW5ib3hWaXNpYmxlID0gcHJvcHMuaXNJbmJveFZpc2libGU7XHJcbiAgICB0aGlzLnByb3BzLmlzQWdpbmdWaXNpYmxlID0gcHJvcHMuaXNBZ2luZ1Zpc2libGU7XHJcbiAgICB0aGlzLnByb3BzLmlzVG9kYXlWaXNpYmxlID0gcHJvcHMuaXNUb2RheVZpc2libGU7XHJcbiAgICB0aGlzLnByb3BzLmlzU2NoZWR1bGVkVmlzaWJsZSA9IHByb3BzLmlzU2NoZWR1bGVkVmlzaWJsZTtcclxuICAgIHRoaXMucHJvcHMuaXNTdGFrZWhvbGRlclZpc2libGUgPSBwcm9wcy5pc1N0YWtlaG9sZGVyVmlzaWJsZTtcclxuICAgIHRoaXMucHJvcHMuaXNTb21lZGF5VmlzaWJsZSA9IHByb3BzLmlzU29tZWRheVZpc2libGU7XHJcbiAgICB0aGlzLnByb3BzLmluYm94VG9vbHRpcCA9IHByb3BzLmluYm94VG9vbHRpcDtcclxuICAgIHRoaXMucHJvcHMuYWdpbmdUb29sdGlwID0gcHJvcHMuYWdpbmdUb29sdGlwO1xyXG4gICAgdGhpcy5wcm9wcy50b2RheVRvb2x0aXAgPSBwcm9wcy50b2RheVRvb2x0aXA7XHJcbiAgICB0aGlzLnByb3BzLnNjaGVkdWxlZFRvb2x0aXAgPSBwcm9wcy5zY2hlZHVsZWRUb29sdGlwO1xyXG4gICAgdGhpcy5wcm9wcy5zdGFrZWhvbGRlclRvb2x0aXAgPSBwcm9wcy5zdGFrZWhvbGRlclRvb2x0aXA7XHJcbiAgICB0aGlzLnByb3BzLnNvbWVkYXlUb29sdGlwID0gcHJvcHMuc29tZWRheVRvb2x0aXA7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuICBcclxuICBwdWJsaWMgc2V0UHJvcHMoc2V0dGVyOiAoY3VycmVudFByb3BzOiBUb2RvSXRlbVZpZXdQcm9wcykgPT4gVG9kb0l0ZW1WaWV3UHJvcHMpOiB2b2lkIHtcclxuICAgIHRoaXMucHJvcHMgPSBzZXR0ZXIodGhpcy5wcm9wcyk7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRWaWV3U3RhdGUobmV3U3RhdGU6IFRvZG9JdGVtVmlld1N0YXRlKSB7XHJcbiAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XHJcbiAgICBpZihuZXdTdGF0ZS5hY3RpdmVQYW5lID09IFRvZG9JdGVtVmlld1BhbmUuQWdpbmcgfHwgbmV3U3RhdGUuYWN0aXZlUGFuZSA9PSBUb2RvSXRlbVZpZXdQYW5lLlNjaGVkdWxlZCB8fCBuZXdTdGF0ZS5hY3RpdmVQYW5lID09IFRvZG9JdGVtVmlld1BhbmUuVG9kYXkpXHJcbiAgICAgIHRoaXMuc29ydFN0YXRlID0ge3N0YXRlOiBUb2RvU29ydFN0YXRlcy5EYXRlQXNjfTtcclxuICAgIGVsc2UgaWYgKG5ld1N0YXRlLmFjdGl2ZVBhbmUgPT0gVG9kb0l0ZW1WaWV3UGFuZS5TdGFrZWhvbGRlcilcclxuICAgICAgdGhpcy5zb3J0U3RhdGUgPSB7c3RhdGU6IFRvZG9Tb3J0U3RhdGVzLlN0YWtlaG9sZGVyQXNjfTtcclxuICAgIGVsc2UgXHJcbiAgICAgIHRoaXMuc29ydFN0YXRlID0ge3N0YXRlOiBUb2RvU29ydFN0YXRlcy5GdWxsVGV4dEFzY307XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRTb3J0U3RhdGUobmV3U3RhdGU6IFRvZG9Tb3J0U3RhdGUpIHtcclxuICAgIHRoaXMuc29ydFN0YXRlID0gbmV3U3RhdGU7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRGaWx0ZXIoZmlsdGVyOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyO1xyXG4gICAgdGhpcy5maWx0ZXJSZWdleHAgPSBuZXcgUmVnRXhwKGZpbHRlciwnaScpO1xyXG4gICAgdGhpcy5yZW5kZXJWaWV3SXRlbXNPbmx5KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlclZpZXdJdGVtc09ubHkoKTp2b2lkIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF07XHJcbiAgICBjb250YWluZXIuY2hpbGRyZW5bMl0ucmVtb3ZlKCk7XHJcbiAgICBjb250YWluZXIuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1pdGVtcycsIChlbCkgPT4ge1xyXG4gICAgICB0aGlzLnJlbmRlckl0ZW1zKGVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXIoKTogdm9pZCB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xyXG4gICAgY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICBjb250YWluZXIuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1jb250YWluZXInLCAoZWwpID0+IHtcclxuICAgICAgZWwuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1zZWFyY2gnLCAoZWwpID0+IHtcclxuICAgICAgICB0aGlzLnJlbmRlclNlYXJjaChlbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBlbC5jcmVhdGVEaXYoJ3RvZG8taXRlbS12aWV3LXRvb2xiYXInLCAoZWwpID0+IHtcclxuICAgICAgICB0aGlzLnJlbmRlclRvb2xCYXIoZWwpO1xyXG4gICAgICB9KTtcclxuICAgICAgZWwuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1pdGVtcycsIChlbCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVuZGVySXRlbXMoZWwpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXJTZWFyY2goY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xyXG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnNvcnRTdGF0ZS5zdGF0ZSA9PSBUb2RvU29ydFN0YXRlcy5Ob25lKSBcclxuICAgICAgICByZXR1cm4gJyBub25lJztcclxuICAgICAgZWxzZSBcclxuICAgICAgICByZXR1cm4gJyBhY3RpdmUnO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzb3J0TGFiZWwgPSAoc29ydFN0YXRlOlRvZG9Tb3J0U3RhdGVzKSA9PiB7XHJcbiAgICAgIHN3aXRjaCAoc29ydFN0YXRlKSB7XHJcbiAgICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5Ob25lOlxyXG4gICAgICAgICAgcmV0dXJuICdTb3J0IGJ5OiBub25lJztcclxuICAgICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLkRhdGVEZXNjOlxyXG4gICAgICAgICAgcmV0dXJuICdTb3J0IGJ5OiBBY3Rpb24gRGF0ZSBEZXNjZW5kaW5nJztcclxuICAgICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLkRhdGVBc2M6XHJcbiAgICAgICAgICByZXR1cm4gJ1NvcnQgYnk6IEFjdGlvbiBEYXRlIEFzY2VuZGluZyc7XHJcbiAgICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5TdGFrZWhvbGRlckRlc2M6XHJcbiAgICAgICAgICByZXR1cm4gJ1NvcnQgYnk6IFBlcnNvbiBEZXNjZW5kaW5nJztcclxuICAgICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLlN0YWtlaG9sZGVyQXNjOlxyXG4gICAgICAgICAgcmV0dXJuICdTb3J0IGJ5OiBQZXJzb24gQXNjZW5kaW5nJztcclxuICAgICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLlByb2plY3REZXNjOlxyXG4gICAgICAgICAgcmV0dXJuICdTb3J0IGJ5OiBQcm9qZWN0IERlc2NlbmRpbmcnO1xyXG4gICAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuUHJvamVjdEFzYzpcclxuICAgICAgICAgIHJldHVybiAnU29ydCBieTogUHJvamVjdCBBc2NlbmRpbmcnO1xyXG4gICAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuTWlzY0Rlc2M6XHJcbiAgICAgICAgICByZXR1cm4gJ1NvcnQgYnk6IE1pc2Mtc25pcHBldCBEZXNjZW5kaW5nJztcclxuICAgICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLk1pc2NBc2M6XHJcbiAgICAgICAgICByZXR1cm4gJ1NvcnQgYnk6IE1pc2Mtc25pcHBldCBBc2NlbmRpbmcnO1xyXG4gICAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuRnVsbFRleHREZXNjOlxyXG4gICAgICAgICAgcmV0dXJuICdTb3J0IGJ5OiBGdWxsIFRleHQgRGVzY2VuZGluZyc7XHJcbiAgICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5GdWxsVGV4dEFzYzpcclxuICAgICAgICAgIHJldHVybiAnU29ydCBieTogRnVsbCBUZXh0IEFzY2VuZGluZyc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge3ZhbHVlOiB0aGlzLmZpbHRlcn0sIChlbCkgPT4ge1xyXG4gICAgICBlbC5hZGRDbGFzcygndG9kby1maWx0ZXItaW5wdXQnKTtcclxuICAgICAgZWwuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsJ3Byb2ovcGVyc29uIFJleEV4cCBmaWx0ZXIsIGNhc2UgaW5zZW5zaXRpdmUnKTtcclxuICAgICAgZWwub25rZXl1cCA9IChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRGaWx0ZXIoKDxIVE1MSW5wdXRFbGVtZW50PmUudGFyZ2V0KS52YWx1ZSk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb250YWluZXIuY3JlYXRlRGl2KGB0b2RvLWl0ZW0tdmlldy1zb3J0JHthY3RpdmVDbGFzcygpfWAsIChlbCkgPT4ge1xyXG4gICAgICBlbC5hcHBlbmRDaGlsZChSZW5kZXJJY29uKEljb24uU29ydCwgc29ydExhYmVsKHRoaXMuc29ydFN0YXRlLnN0YXRlKSkpO1xyXG4gICAgICBlbC5vbkNsaWNrRXZlbnQoKGUpID0+IHtcclxuICAgICAgICBjb25zdCBuZXh0U29ydFN0YXRlID0gKHRoaXMuc29ydFN0YXRlLnN0YXRlICsgMSkgJSB0aGlzLnNvcnRTdGF0ZUNvdW50O1xyXG4gICAgICAgIHRoaXMuc2V0U29ydFN0YXRlKHtzdGF0ZTogbmV4dFNvcnRTdGF0ZX0pO1xyXG4gICAgICAgIC8vKDxIVE1MRWxlbWVudD5lLnRhcmdldCkuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJyxzb3J0TGFiZWwobmV4dFNvcnRTdGF0ZSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZW5kZXJUb29sQmFyKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gKHBhbmU6IFRvZG9JdGVtVmlld1BhbmUpID0+IHtcclxuICAgICAgcmV0dXJuIHBhbmUgPT09IHRoaXMuc3RhdGUuYWN0aXZlUGFuZSA/ICcgYWN0aXZlJyA6ICcnO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzZXRBY3RpdmVQYW5lID0gKHBhbmU6IFRvZG9JdGVtVmlld1BhbmUpID0+IHtcclxuICAgICAgY29uc3QgbmV3U3RhdGUgPSB7XHJcbiAgICAgICAgLi4udGhpcy5zdGF0ZSxcclxuICAgICAgICBhY3RpdmVQYW5lOiBwYW5lLFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnNldFZpZXdTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLmlzSW5ib3hWaXNpYmxlKVxyXG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KGB0b2RvLWl0ZW0tdmlldy10b29sYmFyLWl0ZW0ke2FjdGl2ZUNsYXNzKFRvZG9JdGVtVmlld1BhbmUuSW5ib3gpfWAsIChlbCkgPT4ge1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKFJlbmRlckljb24oSWNvbi5JbmJveCwgdGhpcy5wcm9wcy5pbmJveFRvb2x0aXApKTtcclxuICAgICAgICBlbC5vbkNsaWNrRXZlbnQoKCkgPT4gc2V0QWN0aXZlUGFuZShUb2RvSXRlbVZpZXdQYW5lLkluYm94KSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLmlzQWdpbmdWaXNpYmxlKVxyXG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KGB0b2RvLWl0ZW0tdmlldy10b29sYmFyLWl0ZW0ke2FjdGl2ZUNsYXNzKFRvZG9JdGVtVmlld1BhbmUuQWdpbmcpfWAsIChlbCkgPT4ge1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKFJlbmRlckljb24oSWNvbi5BZ2luZywgdGhpcy5wcm9wcy5hZ2luZ1Rvb2x0aXApKTtcclxuICAgICAgICBlbC5vbkNsaWNrRXZlbnQoKCkgPT4gc2V0QWN0aXZlUGFuZShUb2RvSXRlbVZpZXdQYW5lLkFnaW5nKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLmlzVG9kYXlWaXNpYmxlKVxyXG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KGB0b2RvLWl0ZW0tdmlldy10b29sYmFyLWl0ZW0ke2FjdGl2ZUNsYXNzKFRvZG9JdGVtVmlld1BhbmUuVG9kYXkpfWAsIChlbCkgPT4ge1xyXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKFJlbmRlckljb24oSWNvbi5Ub2RheSwgdGhpcy5wcm9wcy50b2RheVRvb2x0aXApKTtcclxuICAgICAgICBlbC5vbkNsaWNrRXZlbnQoKCkgPT4gc2V0QWN0aXZlUGFuZShUb2RvSXRlbVZpZXdQYW5lLlRvZGF5KSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLnByb3BzLmlzU2NoZWR1bGVkVmlzaWJsZSlcclxuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdihgdG9kby1pdGVtLXZpZXctdG9vbGJhci1pdGVtJHthY3RpdmVDbGFzcyhUb2RvSXRlbVZpZXdQYW5lLlNjaGVkdWxlZCl9YCwgKGVsKSA9PiB7XHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoUmVuZGVySWNvbihJY29uLlNjaGVkdWxlZCwgdGhpcy5wcm9wcy5zY2hlZHVsZWRUb29sdGlwKSk7XHJcbiAgICAgICAgZWwub25DbGlja0V2ZW50KCgpID0+IHNldEFjdGl2ZVBhbmUoVG9kb0l0ZW1WaWV3UGFuZS5TY2hlZHVsZWQpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMucHJvcHMuaXNTdGFrZWhvbGRlclZpc2libGUpXHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoYHRvZG8taXRlbS12aWV3LXRvb2xiYXItaXRlbSR7YWN0aXZlQ2xhc3MoVG9kb0l0ZW1WaWV3UGFuZS5TdGFrZWhvbGRlcil9YCwgKGVsKSA9PiB7XHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoUmVuZGVySWNvbihJY29uLlN0YWtlaG9sZGVyLCB0aGlzLnByb3BzLnN0YWtlaG9sZGVyVG9vbHRpcCkpO1xyXG4gICAgICAgIGVsLm9uQ2xpY2tFdmVudCgoKSA9PiBzZXRBY3RpdmVQYW5lKFRvZG9JdGVtVmlld1BhbmUuU3Rha2Vob2xkZXIpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMucHJvcHMuaXNTb21lZGF5VmlzaWJsZSkgIFxyXG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KGB0b2RvLWl0ZW0tdmlldy10b29sYmFyLWl0ZW0ke2FjdGl2ZUNsYXNzKFRvZG9JdGVtVmlld1BhbmUuU29tZWRheSl9YCwgKGVsKSA9PiB7XHJcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoUmVuZGVySWNvbihJY29uLlNvbWVkYXksIHRoaXMucHJvcHMuc29tZWRheVRvb2x0aXApKTtcclxuICAgICAgICBlbC5vbkNsaWNrRXZlbnQoKCkgPT4gc2V0QWN0aXZlUGFuZShUb2RvSXRlbVZpZXdQYW5lLlNvbWVkYXkpKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlbmRlckl0ZW1zKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgIGNvbnN0IHNvcnRWaWV3ID0gKGE6IFRvZG9JdGVtLCBiOiBUb2RvSXRlbSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5zb3J0VmlldyhhLGIpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHRvZG9zVG9SZW5kZXIgPSB0aGlzLnByb3BzLnRvZG9zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHRoaXMuZmlsdGVyRm9yU3RhdGUsIHRoaXMpO1xyXG4gICAgY29uc3Qgc29ydGVkVG9kb3MgPSB0b2Rvc1RvUmVuZGVyLnNvcnQoc29ydFZpZXcpO1xyXG4gICAgc29ydGVkVG9kb3NcclxuICAgICAgLmZvckVhY2goKHRvZG8saW5kZXgpID0+IHtcclxuICAgICAgICBpZihpbmRleD4wKSB7XHJcbiAgICAgICAgICBpZiggKHRvZG8uaXNXYWl0aW5nRm9yTm90ZSAmJiB0b2Rvc1RvUmVuZGVyW2luZGV4LTFdLmlzRGlzY3Vzc1dpdGhOb3RlKSB8fCBcclxuICAgICAgICAgICAgICAodG9kby5pc1Byb21pc2VkVG9Ob3RlICYmIFxyXG4gICAgICAgICAgICAgICAgKHRvZG9zVG9SZW5kZXJbaW5kZXgtMV0uaXNXYWl0aW5nRm9yTm90ZSB8fCB0b2Rvc1RvUmVuZGVyW2luZGV4LTFdLmlzRGlzY3Vzc1dpdGhOb3RlKSkgfHxcclxuICAgICAgICAgICAgICAoIXRvZG8uaXNQcm9taXNlZFRvTm90ZSAmJiAhdG9kby5pc1dhaXRpbmdGb3JOb3RlICYmICF0b2RvLmlzRGlzY3Vzc1dpdGhOb3RlICYmIFxyXG4gICAgICAgICAgICAgICAgKHRvZG9zVG9SZW5kZXJbaW5kZXgtMV0uaXNXYWl0aW5nRm9yTm90ZSB8fCB0b2Rvc1RvUmVuZGVyW2luZGV4LTFdLmlzRGlzY3Vzc1dpdGhOb3RlIHx8IHRvZG9zVG9SZW5kZXJbaW5kZXgtMV0uaXNQcm9taXNlZFRvTm90ZSkpICkge1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2hyJywge30gLChlbCkgPT4ge1xyXG4gICAgICAgICAgICAgIGVsLmFkZENsYXNzKCd0b2RvLWl0ZW0tdmlldy1kaXZpZGVyJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZURpdigndG9kby1pdGVtLXZpZXctaXRlbScsIChlbCkgPT4ge1xyXG4gICAgICAgICAgZWwuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1pdGVtLWNoZWNrYm94JywgKGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9LCAoZWwpID0+IHtcclxuICAgICAgICAgICAgICBlbC5jaGVja2VkID0gdG9kby5zdGF0dXMgPT09IFRvZG9JdGVtU3RhdHVzLkRvbmU7XHJcbiAgICAgICAgICAgICAgZWwub25DbGlja0V2ZW50KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVG9kbyh0b2RvKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGVsLmNyZWF0ZURpdigndG9kby1pdGVtLXZpZXctaXRlbS1kZXNjcmlwdGlvbicsIChlbCkgPT4ge1xyXG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKHRvZG8uZGVzY3JpcHRpb24sIGVsLCB0b2RvLnNvdXJjZUZpbGVQYXRoLCB0aGlzKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZWwuY3JlYXRlRGl2KCd0b2RvLWl0ZW0tdmlldy1pdGVtLWxpbmsnLCAoZWwpID0+IHtcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoUmVuZGVySWNvbihJY29uLlJldmVhbCwgJ09wZW4gZmlsZScpKTtcclxuICAgICAgICAgICAgZWwub25DbGlja0V2ZW50KCgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLm9wZW5GaWxlKHRvZG8pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc29ydFZpZXcoYTogVG9kb0l0ZW0sIGI6IFRvZG9JdGVtKSB7XHJcbiAgICBsZXQgc29ydFJlc3VsdCA9IDA7XHJcbiAgICBzd2l0Y2ggKHRoaXMuc29ydFN0YXRlLnN0YXRlKSB7XHJcbiAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuTm9uZTpcclxuICAgICAgICBzb3J0UmVzdWx0ID0gMDticmVhaztcclxuICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5EYXRlQXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLmFjdGlvbkRhdGUgPCBiLmFjdGlvbkRhdGUgPyAtMSA6IGEuYWN0aW9uRGF0ZSA+IGIuYWN0aW9uRGF0ZSA/IDEgOiAwO2JyZWFrO1xyXG4gICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLkRhdGVEZXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLmFjdGlvbkRhdGUgPiBiLmFjdGlvbkRhdGUgPyAtMSA6IGEuYWN0aW9uRGF0ZSA8IGIuYWN0aW9uRGF0ZSA/IDEgOiAwO2JyZWFrO1xyXG4gICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLlN0YWtlaG9sZGVyQXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLnBlcnNvbiA8IGIucGVyc29uID8gLTEgOiBhLnBlcnNvbiA+IGIucGVyc29uID8gMSA6IDA7YnJlYWs7XHJcbiAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuU3Rha2Vob2xkZXJEZXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLnBlcnNvbiA+IGIucGVyc29uID8gLTEgOiBhLnBlcnNvbiA8IGIucGVyc29uID8gMSA6IDA7YnJlYWs7XHJcbiAgICAgIGNhc2UgVG9kb1NvcnRTdGF0ZXMuUHJvamVjdEFzYzpcclxuICAgICAgICBzb3J0UmVzdWx0ID0gYS5wcm9qZWN0IDwgYi5wcm9qZWN0ID8gLTEgOiBhLnByb2plY3QgPiBiLnByb2plY3QgPyAxIDogMDticmVhaztcclxuICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5Qcm9qZWN0RGVzYzpcclxuICAgICAgICBzb3J0UmVzdWx0ID0gYS5wcm9qZWN0ID4gYi5wcm9qZWN0ID8gLTEgOiBhLnByb2plY3QgPCBiLnByb2plY3QgPyAxIDogMDticmVhaztcclxuICAgICAgY2FzZSBUb2RvU29ydFN0YXRlcy5NaXNjQXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLm1pc2MgPCBiLm1pc2MgPyAtMSA6IGEubWlzYyA+IGIubWlzYyA/IDEgOiAwO2JyZWFrO1xyXG4gICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLk1pc2NEZXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLm1pc2MgPiBiLm1pc2MgPyAtMSA6IGEubWlzYyA8IGIubWlzYyA/IDEgOiAwO2JyZWFrO1xyXG4gICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLkZ1bGxUZXh0QXNjOlxyXG4gICAgICAgIHNvcnRSZXN1bHQgPSBhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkgPCBiLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkgPyAtMSA6IGEuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKSA+IGIuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKSA/IDEgOiAwO2JyZWFrO1xyXG4gICAgICBjYXNlIFRvZG9Tb3J0U3RhdGVzLkZ1bGxUZXh0RGVzYzpcclxuICAgICAgICBzb3J0UmVzdWx0ID0gYS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpID4gYi5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpID8gLTEgOiBhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkgPCBiLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkgPyAxIDogMDticmVhaztcclxuICAgIH0gXHJcblxyXG4gICAgaWYgKHRoaXMuc3RhdGUuYWN0aXZlUGFuZSA9PSBUb2RvSXRlbVZpZXdQYW5lLlN0YWtlaG9sZGVyKSB7XHJcbiAgICAgIGlmIChhLmlzRGlzY3Vzc1dpdGhOb3RlICYmICFiLmlzRGlzY3Vzc1dpdGhOb3RlKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhLmlzV2FpdGluZ0Zvck5vdGUgJiYgIWIuaXNEaXNjdXNzV2l0aE5vdGUgJiYgIWIuaXNXYWl0aW5nRm9yTm90ZSkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYS5pc1Byb21pc2VkVG9Ob3RlICYmICFiLmlzRGlzY3Vzc1dpdGhOb3RlICYmICFiLmlzV2FpdGluZ0Zvck5vdGUpIHtcclxuICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGIuaXNEaXNjdXNzV2l0aE5vdGUgJiYgIWEuaXNEaXNjdXNzV2l0aE5vdGUpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYi5pc1dhaXRpbmdGb3JOb3RlICYmICFhLmlzRGlzY3Vzc1dpdGhOb3RlICYmICFhLmlzV2FpdGluZ0Zvck5vdGUpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYi5pc1Byb21pc2VkVG9Ob3RlICYmICFhLmlzRGlzY3Vzc1dpdGhOb3RlICYmICFhLmlzV2FpdGluZ0Zvck5vdGUpIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgfSBcclxuICAgICAgcmV0dXJuIHNvcnRSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc29ydFJlc3VsdDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZmlsdGVyRm9yU3RhdGUodmFsdWU6IFRvZG9JdGVtLCBfaW5kZXg6IG51bWJlciwgX2FycmF5OiBUb2RvSXRlbVtdKTogYm9vbGVhbiB7XHJcbiAgICBjb25zdCBpc1BlcnNvbk1hdGNoID0gdmFsdWUucGVyc29uLm1hdGNoKHRoaXMuZmlsdGVyUmVnZXhwKSAhPSBudWxsOyBcclxuICAgIGNvbnN0IGlzUHJvamVjdE1hdGNoID0gdmFsdWUucHJvamVjdC5tYXRjaCh0aGlzLmZpbHRlclJlZ2V4cCkgIT0gbnVsbDsgXHJcbiAgICBjb25zdCBpc01pc2NNYXRjaCA9IHZhbHVlLm1pc2MubWF0Y2godGhpcy5maWx0ZXJSZWdleHApICE9IG51bGw7ICBcclxuICAgIGNvbnN0IGlzRmlsdGVyU2V0ID0gdGhpcy5maWx0ZXIhPVwiXCI7XHJcbiAgICBjb25zdCBoYXNQZXJzb25PclByb2plY3QgPSB2YWx1ZS5wZXJzb24hPScnIHx8IHZhbHVlLnByb2plY3QhPScnO1xyXG4gICAgY29uc3QgaXNQZW9wbGVBY3Rpb25Ob3RlID0gdmFsdWUuaXNEaXNjdXNzV2l0aE5vdGUgfHwgdmFsdWUuaXNXYWl0aW5nRm9yTm90ZSB8fCB2YWx1ZS5pc1Byb21pc2VkVG9Ob3RlO1xyXG4gICAgaWYgKCFpc0ZpbHRlclNldCB8fCBpc1BlcnNvbk1hdGNoIHx8IGlzUHJvamVjdE1hdGNoIHx8IGlzTWlzY01hdGNoKSB7XHJcbiAgICAgIGNvbnN0IGlzVG9kYXkgPSAoZGF0ZTogRGF0ZSkgPT4ge1xyXG4gICAgICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgIGRhdGUuZ2V0RGF0ZSgpID09IHRvZGF5LmdldERhdGUoKSAmJlxyXG4gICAgICAgICAgZGF0ZS5nZXRNb250aCgpID09IHRvZGF5LmdldE1vbnRoKCkgJiZcclxuICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA9PSB0b2RheS5nZXRGdWxsWWVhcigpXHJcbiAgICAgICAgKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGlzQmVmb3JlVG9kYXkgPSAoZGF0ZTogRGF0ZSkgPT4ge1xyXG4gICAgICAgIGxldCB0b2RheSA9IChuZXcgRGF0ZSgpKVxyXG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgICAgIHJldHVybiBkYXRlIDwgdG9kYXk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBpc0FnaW5nTm90ZSA9IHZhbHVlLmFjdGlvbkRhdGUgJiYgaXNCZWZvcmVUb2RheSh2YWx1ZS5hY3Rpb25EYXRlKTtcclxuICAgICAgY29uc3QgaXNUb2RheU5vdGUgPSB2YWx1ZS5hY3Rpb25EYXRlICYmIGlzVG9kYXkodmFsdWUuYWN0aW9uRGF0ZSk7XHJcbiAgICAgIGNvbnN0IGlzU2NoZWR1bGVkTm90ZSA9ICF2YWx1ZS5pc1NvbWVkYXlNYXliZU5vdGUgJiYgdmFsdWUuYWN0aW9uRGF0ZSAmJiAhaXNUb2RheU5vdGUgJiYgIWlzQWdpbmdOb3RlO1xyXG5cclxuICAgICAgc3dpdGNoICh0aGlzLnN0YXRlLmFjdGl2ZVBhbmUpIHtcclxuICAgICAgICBjYXNlIFRvZG9JdGVtVmlld1BhbmUuSW5ib3g6XHJcbiAgICAgICAgICByZXR1cm4gIXZhbHVlLmlzU29tZWRheU1heWJlTm90ZSAmJiAhaXNUb2RheU5vdGUgJiYgIWlzU2NoZWR1bGVkTm90ZSAmJiAhaXNBZ2luZ05vdGUgJiYgIShpc1Blb3BsZUFjdGlvbk5vdGUgJiYgaGFzUGVyc29uT3JQcm9qZWN0KTtcclxuICAgICAgICBjYXNlIFRvZG9JdGVtVmlld1BhbmUuU2NoZWR1bGVkOlxyXG4gICAgICAgICAgcmV0dXJuIGlzU2NoZWR1bGVkTm90ZTtcclxuICAgICAgICBjYXNlIFRvZG9JdGVtVmlld1BhbmUuU29tZWRheTpcclxuICAgICAgICAgIHJldHVybiB2YWx1ZS5pc1NvbWVkYXlNYXliZU5vdGU7XHJcbiAgICAgICAgY2FzZSBUb2RvSXRlbVZpZXdQYW5lLlRvZGF5OlxyXG4gICAgICAgICAgcmV0dXJuIGlzVG9kYXlOb3RlO1xyXG4gICAgICAgIGNhc2UgVG9kb0l0ZW1WaWV3UGFuZS5BZ2luZzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzQWdpbmdOb3RlO1xyXG4gICAgICAgIGNhc2UgVG9kb0l0ZW1WaWV3UGFuZS5TdGFrZWhvbGRlcjpcclxuICAgICAgICAgIHJldHVybiBoYXNQZXJzb25PclByb2plY3QgJiYgaXNQZW9wbGVBY3Rpb25Ob3RlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0b2dnbGVUb2RvKHRvZG86IFRvZG9JdGVtKTogdm9pZCB7XHJcbiAgICB0aGlzLnByb3BzLnRvZ2dsZVRvZG8odG9kbywgVG9kb0l0ZW1TdGF0dXMudG9nZ2xlU3RhdHVzKHRvZG8uc3RhdHVzKSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9wZW5GaWxlKHRvZG86IFRvZG9JdGVtKTogdm9pZCB7XHJcbiAgICB0aGlzLnByb3BzLm9wZW5GaWxlKHRvZG8uc291cmNlRmlsZVBhdGgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luTWFuaWZlc3QsIFRGaWxlLCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgVklFV19UWVBFX1RPRE8gfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcbmltcG9ydCB7IFRvZG9JbmRleCwgVG9kb0l0ZW1JbmRleFByb3BzIH0gZnJvbSAnLi9tb2RlbC9Ub2RvSW5kZXgnO1xyXG5pbXBvcnQgeyBUb2RvSXRlbSwgVG9kb0l0ZW1TdGF0dXMgfSBmcm9tICcuL21vZGVsL1RvZG9JdGVtJztcclxuaW1wb3J0IHtcclxuICBBY3Rpb25UcmFja2VyU2V0dGluZ3MsXHJcbiAgQWN0aW9uVHJhY2tlclNldHRpbmdUYWIsXHJcbiAgREVGQVVMVF9TRVRUSU5HUyxcclxufSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgVG9kb0l0ZW1WaWV3LCBUb2RvSXRlbVZpZXdQcm9wcyB9IGZyb20gJy4vdWkvVG9kb0l0ZW1WaWV3JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjdGlvblRyYWNrZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gIHByaXZhdGUgdG9kb0luZGV4OiBUb2RvSW5kZXg7XHJcbiAgcHJpdmF0ZSB2aWV3OiBUb2RvSXRlbVZpZXc7XHJcbiAgc2V0dGluZ3M6IEFjdGlvblRyYWNrZXJTZXR0aW5ncztcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xyXG4gICAgc3VwZXIoYXBwLCBtYW5pZmVzdCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFRvZG9JdGVtSW5kZXhQcm9wcygpOiBUb2RvSXRlbUluZGV4UHJvcHMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGVyc29uUmVnZXhwOiBuZXcgUmVnRXhwKHRoaXMuZ2V0U2V0dGluZ1ZhbHVlKCdwZXJzb25SZWdleHBTdHJpbmcnKSksXHJcbiAgICAgIHByb2plY3RSZWdleHA6IG5ldyBSZWdFeHAodGhpcy5nZXRTZXR0aW5nVmFsdWUoJ3Byb2plY3RSZWdleHBTdHJpbmcnKSksXHJcbiAgICAgIGRhdGVSZWdleHA6IG5ldyBSZWdFeHAodGhpcy5nZXRTZXR0aW5nVmFsdWUoJ2RhdGVSZWdleHBTdHJpbmcnKSksXHJcbiAgICAgIGRpc2N1c3NXaXRoUmVnZXhwOiBuZXcgUmVnRXhwKFxyXG4gICAgICAgIHRoaXMuZ2V0U2V0dGluZ1ZhbHVlKCdkaXNjdXNzV2l0aFJlZ2V4cFN0cmluZycpLFxyXG4gICAgICApLFxyXG4gICAgICB3YWl0aW5nRm9yUmVnZXhwOiBuZXcgUmVnRXhwKFxyXG4gICAgICAgIHRoaXMuZ2V0U2V0dGluZ1ZhbHVlKCd3YWl0aW5nRm9yUmVnZXhwU3RyaW5nJyksXHJcbiAgICAgICksXHJcbiAgICAgIHByb21pc2VkVG9SZWdleHA6IG5ldyBSZWdFeHAoXHJcbiAgICAgICAgdGhpcy5nZXRTZXR0aW5nVmFsdWUoJ3Byb21pc2VkVG9SZWdleHBTdHJpbmcnKSxcclxuICAgICAgKSxcclxuICAgICAgc29tZWRheU1heWJlUmVnZXhwOiBuZXcgUmVnRXhwKFxyXG4gICAgICAgIHRoaXMuZ2V0U2V0dGluZ1ZhbHVlKCdzb21lZGF5TWF5YmVSZWdleHBTdHJpbmcnKSxcclxuICAgICAgKSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zb2xlLmxvZygnbG9hZGluZyBwbHVnaW4nKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgIHRoaXMudG9kb0luZGV4ID0gbmV3IFRvZG9JbmRleChcclxuICAgICAgdGhpcy5hcHAudmF1bHQsXHJcbiAgICAgIHRoaXMudGljay5iaW5kKHRoaXMpLFxyXG4gICAgICB0aGlzLmdldFRvZG9JdGVtSW5kZXhQcm9wcygpLFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhWSUVXX1RZUEVfVE9ETywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpID0+IHtcclxuICAgICAgY29uc3QgdG9kb3M6IFRvZG9JdGVtW10gPSBbXTtcclxuICAgICAgY29uc3QgcHJvcHMgPSB7XHJcbiAgICAgICAgdG9kb3M6IHRvZG9zLFxyXG4gICAgICAgIG9wZW5GaWxlOiAoZmlsZVBhdGg6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCkgYXMgVEZpbGU7XHJcbiAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uuc3BsaXRBY3RpdmVMZWFmKCkub3BlbkZpbGUoZmlsZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2dnbGVUb2RvOiAodG9kbzogVG9kb0l0ZW0sIG5ld1N0YXR1czogVG9kb0l0ZW1TdGF0dXMpID0+IHtcclxuICAgICAgICAgIHRoaXMudG9kb0luZGV4LnNldFN0YXR1cyh0b2RvLCBuZXdTdGF0dXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudmlldyA9IG5ldyBUb2RvSXRlbVZpZXcobGVhZiwgcHJvcHMpO1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3O1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBY3Rpb25UcmFja2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cclxuICAgIGlmICh0aGlzLmFwcC53b3Jrc3BhY2UubGF5b3V0UmVhZHkpIHtcclxuICAgICAgdGhpcy5pbml0TGVhZigpO1xyXG4gICAgICBhd2FpdCB0aGlzLnByZXBhcmVJbmRleCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LXJlYWR5JywgdGhpcy5pbml0TGVhZi5iaW5kKHRoaXMpKSxcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbihcclxuICAgICAgICAgICdsYXlvdXQtcmVhZHknLFxyXG4gICAgICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5wcmVwYXJlSW5kZXgoKSxcclxuICAgICAgICApLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb251bmxvYWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2VcclxuICAgICAgLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVE9ETylcclxuICAgICAgLmZvckVhY2gobGVhZiA9PiBsZWFmLmRldGFjaCgpKTtcclxuICB9XHJcblxyXG4gIGluaXRMZWFmKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RPRE8pLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKS5zZXRWaWV3U3RhdGUoe1xyXG4gICAgICB0eXBlOiBWSUVXX1RZUEVfVE9ETyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcHJlcGFyZUluZGV4KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy50b2RvSW5kZXguaW5pdGlhbGl6ZSgpO1xyXG4gIH1cclxuXHJcbiAgdGljayh0b2RvczogVG9kb0l0ZW1bXSk6IHZvaWQge1xyXG4gICAgdGhpcy52aWV3LnNldFByb3BzKChjdXJyZW50UHJvcHM6IFRvZG9JdGVtVmlld1Byb3BzKSA9PiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uY3VycmVudFByb3BzLFxyXG4gICAgICAgIHRvZG9zOiB0b2RvcyxcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzYXZlU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgYXdhaXQgdGhpcy50b2RvSW5kZXgucmVsb2FkSW5kZXgodGhpcy5nZXRUb2RvSXRlbUluZGV4UHJvcHMoKSk7XHJcbiAgfVxyXG5cclxuICBnZXRTZXR0aW5nVmFsdWU8SyBleHRlbmRzIGtleW9mIEFjdGlvblRyYWNrZXJTZXR0aW5ncz4oXHJcbiAgICBzZXR0aW5nOiBLLFxyXG4gICk6IEFjdGlvblRyYWNrZXJTZXR0aW5nc1tLXSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZXR0aW5nc1tzZXR0aW5nXTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlRGaWxlIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciLCJJdGVtVmlldyIsIk1hcmtkb3duUmVuZGVyZXIiLCJQbHVnaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdURBO0FBQ08sU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFO0FBQzdELElBQUksU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsT0FBTyxLQUFLLFlBQVksQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxVQUFVLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO0FBQ2hILElBQUksT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQy9ELFFBQVEsU0FBUyxTQUFTLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUNuRyxRQUFRLFNBQVMsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTtBQUN0RyxRQUFRLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUMsRUFBRTtBQUN0SCxRQUFRLElBQUksQ0FB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
